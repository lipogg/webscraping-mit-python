
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Fortsetzung BeautifulSoup &#8212; Webscraping für Geisteswissenschaften</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/07/subchapters/02_fortsetzung_beautifulsoup';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Webscraping für Geisteswissenschaften - Home"/>
    <script>document.write(`<img src="../../../_static/logo.png" class="logo__image only-dark" alt="Webscraping für Geisteswissenschaften - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Webscraping mit Python für Geisteswissenschaften
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01/01_intro.html">1. Einstieg</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01/subchapters/01_was_ist_webscraping.html">1.1. Was ist Web Scraping?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01/subchapters/02_warum_webscraping_lernen.html">1.2. Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01/subchapters/03_semesterplan.html">1.3. Semesterplan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01/subchapters/04_lernziele.html">1.4. Lernziele</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01/subchapters/05_organisation.html">1.5. Organisatorisches</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../02/02_intro.html">2. Python I</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../02/subchapters/01_jupyterlite.html">2.1. JupyterLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../02/subchapters/01_style.html">2.2. Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../02/subchapters/01_hilfe.html">2.3. Hilfe!!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../02/subchapters/02_grundbegriffe.html">2.4. Grundbegriffe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../02/subchapters/03_datentypen.html">2.5. Einfache Datentypen, Strings und Operatoren</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../02/subchapters/04_variablen.html">2.6. Variablen</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../03/03_intro.html">3. Python II</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03/subchapters/01_datentypen.html">3.1. Zusammengesetzte Datentypen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03/subchapters/02_kontrollstrukturen.html">3.2. Kontrollstrukturen</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../04/04_intro.html">4. Python III</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../04/subchapters/01_funktionen.html">4.1. Funktionen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../04/subchapters/02_pakete.html">4.2. Module, Pakete, Bibliotheken</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../05/05_intro.html">5. Installation und Setup</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../05/subchapters/01_vorbereitung.html">5.1. Vorbereitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../05/subchapters/02_installation_setup.html">5.2. Installation und Setup</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../06/06_intro.html">6. Einstieg Webscraping</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../06/subchapters/01_rechtliches.html">6.1. Der rechtliche Rahmen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../06/subchapters/02_html.html">6.2. HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../06/subchapters/03_css.html">6.3. CSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../06/subchapters/04_http.html">6.4. Client, Server, HTTP</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/lipogg/webscraping-mit-python" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/chapters/07/subchapters/02_fortsetzung_beautifulsoup.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Fortsetzung BeautifulSoup</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recap-zitate-von-der-ersten-seite-extrahieren-ohne-metadaten">Recap: Zitate von der ersten Seite extrahieren, ohne Metadaten</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zitate-von-der-ersten-seite-extrahieren-mit-metadaten">Zitate von der ersten Seite extrahieren, mit Metadaten</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zitate-von-allen-seiten-der-website-extrahieren-ohne-metadaten">Zitate von allen Seiten der Website extrahieren, ohne Metadaten</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-for-schleife-fur-exakt-10-unterseiten">Lösung mit for-Schleife: für exakt 10 Unterseiten</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-while-schleife-unbekannte-anzahl-von-unterseiten">Lösung mit while-Schleife: unbekannte Anzahl von Unterseiten</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zitate-von-allen-seiten-extrahieren-mit-metadaten">Zitate von allen Seiten extrahieren, mit Metadaten</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-for-schleife">Lösung mit for-Schleife</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-while-schleife">Lösung mit while-Schleife</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-funktionen">Lösung mit Funktionen</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pandas-dataframe-in-csv-datei-schreiben">Pandas-DataFrame in CSV-Datei schreiben</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-und-memit-was-ist-das">%%time und %%memit: Was ist das?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quellen">Quellen</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="fortsetzung-beautifulsoup">
<h1>Fortsetzung BeautifulSoup<a class="headerlink" href="#fortsetzung-beautifulsoup" title="Link to this heading">#</a></h1>
<p>Letzte Woche haben wir alle Zitate von der ersten Seite der Website <a class="reference external" href="https://quotes.toscrape.com">https://quotes.toscrape.com</a> extrahiert.
Heute werden wir den Code in drei Aspekten ergänzen:</p>
<ol class="arabic simple">
<li><p>Zitate von der ersten Seite mit Metadaten extrahieren</p></li>
<li><p>Zitate von allen Seiten extrahieren, mit und ohne Metadaten</p></li>
<li><p>Daten in Dateien schreiben: Beispiel pandas DataFrame in CSV-Datei</p></li>
</ol>
<p>Für die Ausführung des Codes brauchen wir zusätzlich zu den Bibliotheken requests und bs4 außerdem noch die Bibliothek pandas. Zusätzlich könnt ihr das Modul memory_profiler installieren, das erlaubt, zu messen, wieviel Speicher zum Ausführen einer Codezelle benötigt wird.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#import sys</span>
<span class="c1">#!conda install --yes --prefix {sys.prefix} memory_profiler</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># %load_ext memory_profiler</span>
</pre></div>
</div>
</div>
</div>
<section id="recap-zitate-von-der-ersten-seite-extrahieren-ohne-metadaten">
<h2>Recap: Zitate von der ersten Seite extrahieren, ohne Metadaten<a class="headerlink" href="#recap-zitate-von-der-ersten-seite-extrahieren-ohne-metadaten" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">URL</span> <span class="o">=</span> <span class="s2">&quot;https://quotes.toscrape.com/&quot;</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

<span class="n">zitate</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">zitat</span> <span class="ow">in</span> <span class="n">zitate</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">zitat</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”
“It is our choices, Harry, that show what we truly are, far more than our abilities.”
“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”
“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”
“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”
“Try not to become a man of success. Rather become a man of value.”
“It is better to be hated for what you are than to be loved for what you are not.”
“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”
“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”
“A day without sunshine is like, you know, night.”
</pre></div>
</div>
</div>
</div>
</section>
<section id="zitate-von-der-ersten-seite-extrahieren-mit-metadaten">
<h2>Zitate von der ersten Seite extrahieren, mit Metadaten<a class="headerlink" href="#zitate-von-der-ersten-seite-extrahieren-mit-metadaten" title="Link to this heading">#</a></h2>
<p>In der letzten Stunde haben wir die BeautifulSoup-Methoden .find() und .find_all() verwendet, um HTML-Elemente in einem  BeautifulSoup-Objekt zu finden. Genauso könnten wir auch vorgehen, um neben den Zitaten auch einige Metadaten zu extrahieren, also zum Beispiel auch den Namen der Person, von der das Zitat stammt, und die Tags, mit denen das Zitat versehen wurde.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;quote&quot;</span><span class="p">)</span>
<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
    <span class="n">quote_text</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
    <span class="n">quote_author</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;small&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
    <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;tag&quot;</span><span class="p">)</span>
    <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
        <span class="n">tags_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote_text</span><span class="p">)</span>
    <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote_author</span><span class="p">)</span>
    <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dictionary ist nicht besonders übersichtlich</span>
<span class="n">quotes_dict</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Text&#39;: [&#39;“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”&#39;,
  &#39;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&#39;,
  &#39;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&#39;,
  &#39;“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”&#39;,
  &quot;“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”&quot;,
  &#39;“Try not to become a man of success. Rather become a man of value.”&#39;,
  &#39;“It is better to be hated for what you are than to be loved for what you are not.”&#39;,
  &quot;“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”&quot;,
  &quot;“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”&quot;,
  &#39;“A day without sunshine is like, you know, night.”&#39;],
 &#39;Author&#39;: [&#39;Albert Einstein&#39;,
  &#39;J.K. Rowling&#39;,
  &#39;Albert Einstein&#39;,
  &#39;Jane Austen&#39;,
  &#39;Marilyn Monroe&#39;,
  &#39;Albert Einstein&#39;,
  &#39;André Gide&#39;,
  &#39;Thomas A. Edison&#39;,
  &#39;Eleanor Roosevelt&#39;,
  &#39;Steve Martin&#39;],
 &#39;Tags&#39;: [[&#39;change&#39;, &#39;deep-thoughts&#39;, &#39;thinking&#39;, &#39;world&#39;],
  [&#39;abilities&#39;, &#39;choices&#39;],
  [&#39;inspirational&#39;, &#39;life&#39;, &#39;live&#39;, &#39;miracle&#39;, &#39;miracles&#39;],
  [&#39;aliteracy&#39;, &#39;books&#39;, &#39;classic&#39;, &#39;humor&#39;],
  [&#39;be-yourself&#39;, &#39;inspirational&#39;],
  [&#39;adulthood&#39;, &#39;success&#39;, &#39;value&#39;],
  [&#39;life&#39;, &#39;love&#39;],
  [&#39;edison&#39;, &#39;failure&#39;, &#39;inspirational&#39;, &#39;paraphrased&#39;],
  [&#39;misattributed-eleanor-roosevelt&#39;],
  [&#39;humor&#39;, &#39;obvious&#39;, &#39;simile&#39;]]}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dataframe ist übersichtlicher</span>
<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>
<span class="n">quotes_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Text</th>
      <th>Author</th>
      <th>Tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>“The world as we have created it is a process ...</td>
      <td>Albert Einstein</td>
      <td>[change, deep-thoughts, thinking, world]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>“It is our choices, Harry, that show what we t...</td>
      <td>J.K. Rowling</td>
      <td>[abilities, choices]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>“There are only two ways to live your life. On...</td>
      <td>Albert Einstein</td>
      <td>[inspirational, life, live, miracle, miracles]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>“The person, be it gentleman or lady, who has ...</td>
      <td>Jane Austen</td>
      <td>[aliteracy, books, classic, humor]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>“Imperfection is beauty, madness is genius and...</td>
      <td>Marilyn Monroe</td>
      <td>[be-yourself, inspirational]</td>
    </tr>
    <tr>
      <th>5</th>
      <td>“Try not to become a man of success. Rather be...</td>
      <td>Albert Einstein</td>
      <td>[adulthood, success, value]</td>
    </tr>
    <tr>
      <th>6</th>
      <td>“It is better to be hated for what you are tha...</td>
      <td>André Gide</td>
      <td>[life, love]</td>
    </tr>
    <tr>
      <th>7</th>
      <td>“I have not failed. I've just found 10,000 way...</td>
      <td>Thomas A. Edison</td>
      <td>[edison, failure, inspirational, paraphrased]</td>
    </tr>
    <tr>
      <th>8</th>
      <td>“A woman is like a tea bag; you never know how...</td>
      <td>Eleanor Roosevelt</td>
      <td>[misattributed-eleanor-roosevelt]</td>
    </tr>
    <tr>
      <th>9</th>
      <td>“A day without sunshine is like, you know, nig...</td>
      <td>Steve Martin</td>
      <td>[humor, obvious, simile]</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Anstelle der Methode .get_text() kann auch das Attribut .text abgerufen werden: Beide geben den Textinhalt des Elements zurück.</p>
<p>Aber was passiert, wenn ein Element nicht gefunden werden kann, beispielsweise, weil für ein Zitat keine Tags angegeben wurden, oder wenn die Angabe der Autor:in fehlt? In diesem Fall würde die Methode .find() den Wert None und die Methode .find_all() eine leere Liste zurückgeben. Anstelle der Autor:innennamen und der Zitate würde dann dem Dictionary der Wert None hinzugefügt werden. Über den Fall, dass ein Element nicht gefunden wurde, sollte der Code uns irgendwie informieren, damit wir den Überblick über diese Fälle behalten und entscheiden können, wie damit umgegangen werden soll. Beispielsweise könnte es, je nach weiteren Verarbeitungsschritten, sinnvoller sein, dem Dictionary einen leeren String hinzuzufügen, wenn Autor:in oder Zitat nicht gefunden werden anstelle des Objekts None. Wir könnten dazu zunächst überprüfen, ob tatsächlich ein Element gefunden wurde. Nur, wenn ein Element gefunden wurde, wird es direkt dem Dictionary hinzugefügt. Wenn das Element nicht gefunden wird, wird eine Nachricht ausgegeben, um dies zu registrieren, und es wird stattdessen ein leerer String hinzugefügt.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;quote&quot;</span><span class="p">)</span>
<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
    <span class="n">quote_text</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
    <span class="n">quote_author</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;small&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;author&quot;</span><span class="p">)</span>
    <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;tag&quot;</span><span class="p">)</span>
    <span class="n">tag_texts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
        <span class="n">tag_texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">quote_text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote_text</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Zitat hat keinen Text&quot;</span><span class="p">)</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">quote_author</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote_author</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Zitat hat keine:n Autor:in&quot;</span><span class="p">)</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag_texts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Zitat hat keine Tags&quot;</span><span class="p">)</span>
        <span class="c1"># in diesem Fall wird automatisch eine leere Liste hinzugefügt, wir müssen nichts weiter tun</span>
</pre></div>
</div>
</div>
</div>
<p>Es ist immer wichtig, mögliche nicht gelungene Anfragen zu registrieren und sich zu überlegen, welche Sonderfälle auftreten können (z.B. Anfrage scheitert, Element wird nicht gefunden, …). Der Einfachheit halber verwenden wir im Folgenden den Code ohne die zusätzlichen if-else-Verzweigungen.
Die Suche mit find() und find_all() produziert bei komplexeren Abfragen aber auch bereits ohne die if-else Verzweigung unübersichtlichen Code, weil wir als Argument zusätzlich die CSS-Klasse des gesuchten Elements angeben müssen. Mit .find() und .find_all() ist es außerdem nicht so einfach möglich, Elemente etwas feingranularer zu extrahieren. Die Methoden .select_one() und .select()ermöglichen unter anderem, direkt nach einer CSS-Klasse zu suchen und komplexere Suchen kompakt zu formulieren.</p>
<p>Zum Nachlesen: <a class="reference external" href="https://beautiful-soup-4.readthedocs.io/en/latest/index.html?highlight=select#css-selectors">https://beautiful-soup-4.readthedocs.io/en/latest/index.html?highlight=select#css-selectors</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;div.quote&quot;</span><span class="p">)</span>
<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
    <span class="n">quote_text</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;span.text&quot;</span><span class="p">)</span> <span class="c1"># oder einfach &#39;.text&#39;</span>
    <span class="n">quote_author</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;small.author&quot;</span><span class="p">)</span> <span class="c1"># oder einfach &#39;.author&#39;</span>
    <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;a.tag&quot;</span><span class="p">)</span>
    <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
        <span class="n">tags_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote_text</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote_author</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Die Suche nach CSS-Selektoren mithilfe der .select_one() und .select() Methoden hat außerdem einen weiteren Vorteil: Sie erlauben, direkt nach Kind- oder Geschwisterelementen eines Elements zu suchen. Bei der Verwendung von .find() und .find_all() hatten wir eine for-Schleife verwendet, um die Suche auf Kindelemente der div-Elemente mit der Klasse ‘quote’ einzuschränken. In manchen Fällen kann die Verwendung von .select() anstelle von .find_all() eine solche for-Schleife ersetzen. In unserem Beispiel würde zur Suche nach Zitattexten und Autor:innennamen beispielsweise keine for-Schleife erfordern:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Zitattexte: &#39;div.quote &gt; span.text&#39; findet direkte Kindelemente des div-Elements mit der Klasse &#39;quote&#39;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;div.quote &gt; span.text&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“Try not to become a man of success. Rather become a man of value.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“It is better to be hated for what you are than to be loved for what you are not.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”&lt;/span&gt;,
 &lt;span class=&quot;text&quot; itemprop=&quot;text&quot;&gt;“A day without sunshine is like, you know, night.”&lt;/span&gt;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Autor:innen: &#39;div.quote small.author&#39; findet alle small-Elemente mit der Klasse &#39;author&#39; innerhalb de des div-Elements mit der Klasse &#39;quote&#39;, auch &quot;Enkelkinder&quot;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;div.quote small.author&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Albert Einstein&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;J.K. Rowling&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Albert Einstein&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Jane Austen&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Marilyn Monroe&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Albert Einstein&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;André Gide&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Thomas A. Edison&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Eleanor Roosevelt&lt;/small&gt;,
 &lt;small class=&quot;author&quot; itemprop=&quot;author&quot;&gt;Steve Martin&lt;/small&gt;]
</pre></div>
</div>
</div>
</div>
<p>Bisher haben wir vor allem nach HTML-Elementen gesucht, die ein class- oder id-Attribut haben. Aber nicht alle Elemente haben diese Attribute. Um nach einem Element mit einem bestimmten Attribut zu suchen, kann  find() und find_all() beim Aufruf das Argument attrs übergeben werden. Zum Beispiel könnten wir so nach einem bestimmten Tag suchen, hier dem Tag “inspirational”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/tag/inspirational/page/1/&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;a class=&quot;tag&quot; href=&quot;/tag/inspirational/page/1/&quot;&gt;inspirational&lt;/a&gt;,
 &lt;a class=&quot;tag&quot; href=&quot;/tag/inspirational/page/1/&quot;&gt;inspirational&lt;/a&gt;,
 &lt;a class=&quot;tag&quot; href=&quot;/tag/inspirational/page/1/&quot;&gt;inspirational&lt;/a&gt;]
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Verständnisfragen</p>
<p>Recherchiert in den BeautifulSoup-Dokumentationsseiten:</p>
<ul class="simple">
<li><p>Wie kann man nach den Geschwisterelementen eines Elements suchen, das keine Attribute hat? In diesem Fall kann .select() nicht angewandt werden.</p></li>
<li><p>Gibt es noch andere Funktionen, mit denen man nach Geschwisterelementen suchen kann?</p></li>
<li><p>Wie kann man den Funktionsaufruf <code class="docutils literal notranslate"><span class="pre">soup.find_all(&quot;element&quot;,</span> <span class="pre">attrs={&quot;key1&quot;:</span> <span class="pre">&quot;value&quot;})</span></code> so anpassen, dass nach allen Elementen gesucht wird, die nicht nur das Attribut “key1” haben, sondern zusätzlich auch das Attribut “key2”?</p></li>
</ul>
</div>
</section>
<section id="zitate-von-allen-seiten-der-website-extrahieren-ohne-metadaten">
<h2>Zitate von allen Seiten der Website extrahieren, ohne Metadaten<a class="headerlink" href="#zitate-von-allen-seiten-der-website-extrahieren-ohne-metadaten" title="Link to this heading">#</a></h2>
<section id="losung-mit-for-schleife-fur-exakt-10-unterseiten">
<h3>Lösung mit for-Schleife: für exakt 10 Unterseiten<a class="headerlink" href="#losung-mit-for-schleife-fur-exakt-10-unterseiten" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>
<span class="c1"># Lösungsidee von GitHub-Nutzer:in Bhavya Bindela: https://bhavyasree.github.io/PythonClass/Notebooks/18.scrape-quotes/ . Angepasst für die Extraktion von Zitaten statt Autor:innen</span>
<span class="c1"># for Schleife mit Set</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com/page/&quot;</span>

<span class="n">quotes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
    <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote &gt; .text&quot;</span><span class="p">):</span>
        <span class="n">quotes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="c1"># type(quote) ist bs4.element.Tag: hat Attribut text; add() ist eine set-Methode</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 294 ms, sys: 25.7 ms, total: 320 ms
Wall time: 2.86 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span> <span class="c1"># sets haben keine Ordnung: das ist unpraktisch</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;“... a mind needs books as a sword needs a whetstone, if it is to keep its edge.”&#39;,
 &#39;“A day without sunshine is like, you know, night.”&#39;,
 &quot;“A lady&#39;s imagination is very rapid; it jumps from admiration to love, from love to matrimony in a moment.”&quot;,
 &#39;“A lie can travel half way around the world while the truth is putting on its shoes.”&#39;,
 &quot;“A person&#39;s a person, no matter how small.”&quot;,
 &#39;“A reader lives a thousand lives before he dies, said Jojen. The man who never reads lives only one.”&#39;,
 &quot;“A wise girl kisses but doesn&#39;t love, listens but doesn&#39;t believe, and leaves before she is left.”&quot;,
 &quot;“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”&quot;,
 &quot;“All you need is love. But a little chocolate now and then doesn&#39;t hurt.”&quot;,
 &#39;“Any fool can know. The point is to understand.”&#39;,
 &#39;“Anyone who has never made a mistake has never tried anything new.”&#39;,
 &#39;“Anyone who thinks sitting in church can make you a Christian must also think that sitting in a garage can make you a car.”&#39;,
 &#39;“Beauty is in the eye of the beholder and it may be necessary from time to time to give a stupid or misinformed beholder a black eye.”&#39;,
 &#39;“But better to get hurt by the truth than comforted with a lie.”&#39;,
 &#39;“Do not pity the dead, Harry. Pity the living, and, above all those who live without love.”&#39;,
 &#39;“Do one thing every day that scares you.”&#39;,
 &#39;“Finish each day and be done with it. You have done what you could. Some blunders and absurdities no doubt crept in; forget them as soon as you can. Tomorrow is a new day. You shall begin it serenely and with too high a spirit to be encumbered with your old nonsense.”&#39;,
 &#39;“For every minute you are angry you lose sixty seconds of happiness.”&#39;,
 &#39;“Good friends, good books, and a sleepy conscience: this is the ideal life.”&#39;,
 &quot;“He&#39;s like a drug for you, Bella.”&quot;,
 &#39;“I am free of all prejudice. I hate everyone equally. ”&#39;,
 &#39;“I am good, but not an angel. I do sin, but I am not the devil. I am just a small girl in a big world trying to find someone to love.”&#39;,
 &#39;“I believe in Christianity as I believe that the sun has risen: not only because I see it, but because by it I see everything else.”&#39;,
 &#39;“I declare after all there is no enjoyment like reading! How much sooner one tires of any thing than of a book! -- When I have a house of my own, I shall be miserable if I have not an excellent library.”&#39;,
 &#39;“I have always imagined that Paradise will be a kind of library.”&#39;,
 &quot;“I have heard there are troubles of more than one kind. Some come from ahead and some come from behind. But I&#39;ve bought a big bat. I&#39;m all ready you see. Now my troubles are going to have troubles with me!”&quot;,
 &#39;“I have never let my schooling interfere with my education.”&#39;,
 &quot;“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”&quot;,
 &#39;“I like nonsense, it wakes up the brain cells. Fantasy is a necessary ingredient in living.”&#39;,
 &#39;“I love you without knowing how, or when, or from where. I love you simply, without problems or pride: I love you in this way because I do not know any other way of loving but this, in which there is no I or you, so intimate that your hand upon my chest is my hand, so intimate that when I fall asleep your eyes close.”&#39;,
 &#39;“I may not have gone where I intended to go, but I think I have ended up where I needed to be.”&#39;,
 &quot;“I&#39;m the one that&#39;s got to die when it&#39;s time for me to die, so let me live my life the way I want to.”&quot;,
 &#39;“If I had a flower for every time I thought of you...I could walk through my garden forever.”&#39;,
 &#39;“If I were not a physicist, I would probably be a musician. I often think in music. I live my daydreams in music. I see my life in terms of music.”&#39;,
 &#39;“If you can make a woman laugh, you can make her do anything.”&#39;,
 &quot;“If you can&#39;t explain it to a six year old, you don&#39;t understand it yourself.”&quot;,
 &#39;“If you judge people, you have no time to love them.”&#39;,
 &#39;“If you only read the books that everyone else is reading, you can only think what everyone else is thinking.”&#39;,
 &#39;“If you want your children to be intelligent, read them fairy tales. If you want them to be more intelligent, read them more fairy tales.”&#39;,
 &quot;“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”&quot;,
 &#39;“It is better to be hated for what you are than to be loved for what you are not.”&#39;,
 &#39;“It is impossible to live without failing at something, unless you live so cautiously that you might as well not have lived at all - in which case, you fail by default.”&#39;,
 &#39;“It is never too late to be what you might have been.”&#39;,
 &#39;“It is not a lack of love, but a lack of friendship that makes unhappy marriages.”&#39;,
 &#39;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&#39;,
 &#39;“It matters not what someone is born, but what they grow to be.”&#39;,
 &#39;“It takes a great deal of bravery to stand up to our enemies, but just as much to stand up to our friends.”&#39;,
 &#39;“It takes courage to grow up and become who you really are.”&#39;,
 &#39;“Life is like riding a bicycle. To keep your balance, you must keep moving.”&#39;,
 &#39;“Life is what happens to us while we are making other plans.”&#39;,
 &quot;“Life isn&#39;t about finding yourself. Life is about creating yourself.”&quot;,
 &#39;“Logic will get you from A to Z; imagination will get you everywhere.”&#39;,
 &#39;“Love does not begin and end the way we seem to think it does. Love is a battle, love is a war; love is a growing up.”&#39;,
 &#39;“Never tell the truth to people who are not worthy of it.”&#39;,
 &#39;“Not all of us can do great things. But we can do small things with great love.”&#39;,
 &#39;“Not all those who wander are lost.”&#39;,
 &#39;“Of course it is happening inside your head, Harry, but why on earth should that mean that it is not real?”&#39;,
 &#39;“One good thing about music, when it hits you, you feel no pain.”&#39;,
 &#39;“Only in the darkness can you see the stars.”&#39;,
 &#39;“Remember, if the time should come when you have to make a choice between what is right and what is easy, remember what happened to a boy who was good, and kind, and brave, because he strayed across the path of Lord Voldemort. Remember Cedric Diggory.”&#39;,
 &quot;“Remember, we&#39;re madly in love, so it&#39;s all right to kiss me anytime you feel like it.”&quot;,
 &#39;“Some day you will be old enough to start reading fairy tales again.”&#39;,
 &#39;“Some people never go crazy. What truly horrible lives they must lead.”&#39;,
 &quot;“That&#39;s the problem with drinking, I thought, as I poured myself a drink. If something bad happens you drink in an attempt to forget; if something good happens you drink in order to celebrate; and if nothing happens you drink to make something happen.”&quot;,
 &#39;“The difference between genius and stupidity is: genius has its limits.”&#39;,
 &#39;“The fear of death follows from the fear of life. A man who lives fully is prepared to die at any time.”&#39;,
 &quot;“The more that you read, the more things you will know. The more that you learn, the more places you&#39;ll go.”&quot;,
 &quot;“The opposite of love is not hate, it&#39;s indifference. The opposite of art is not ugliness, it&#39;s indifference. The opposite of faith is not heresy, it&#39;s indifference. And the opposite of life is not death, it&#39;s indifference.”&quot;,
 &#39;“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”&#39;,
 &quot;“The question isn&#39;t who is going to let me; it&#39;s who is going to stop me.”&quot;,
 &#39;“The real lover is the man who can thrill you by kissing your forehead or smiling into your eyes or just staring into space.”&#39;,
 &#39;“The reason I talk to myself is because I’m the only one whose answers I accept.”&#39;,
 &#39;“The trouble with having an open mind, of course, is that people will insist on coming along and trying to put things in it.”&#39;,
 &#39;“The truth is, everyone is going to hurt you. You just got to find the ones worth suffering for.”&#39;,
 &#39;“The truth.&quot; Dumbledore sighed. &quot;It is a beautiful and terrible thing, and should therefore be treated with great caution.”&#39;,
 &#39;“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”&#39;,
 &#39;“There are few people whom I really love, and still fewer of whom I think well. The more I see of the world, the more am I dissatisfied with it; and every day confirms my belief of the inconsistency of all human characters, and of the little dependence that can be placed on the appearance of merit or sense.”&#39;,
 &#39;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&#39;,
 &#39;“There is no friend as loyal as a book.”&#39;,
 &#39;“There is nothing I would not do for those who are really my friends. I have no notion of loving people by halves, it is not my nature.”&#39;,
 &#39;“There is nothing to writing. All you do is sit down at a typewriter and bleed.”&#39;,
 &#39;“Think left and think right and think low and think high. Oh, the thinks you can think up if only you try!”&#39;,
 &quot;“This life is what you make it. No matter what, you&#39;re going to mess up sometimes, it&#39;s a universal truth. But the good part is you get to decide how you&#39;re going to mess it up. Girls will be your friends - they&#39;ll act like it anyway. But just remember, some come, some go. The ones that stay with you through everything - they&#39;re your true best friends. Don&#39;t let go of them. Also remember, sisters make the best friends in the world. As for lovers, well, they&#39;ll come and go too. And baby, I hate to say it, most of them - actually pretty much all of them are going to break your heart, but you can&#39;t give up because if you give up, you&#39;ll never find your soulmate. You&#39;ll never find that half who makes you whole and that goes for everything. Just because you fail once, doesn&#39;t mean you&#39;re gonna fail at everything. Keep trying, hold on, and always, always, always believe in yourself, because if you don&#39;t, then who will, sweetie? So keep your head high, keep your chin up, and most importantly, keep smiling, because life&#39;s a beautiful thing and there&#39;s so much to smile about.”&quot;,
 &#39;“To die will be an awfully big adventure.”&#39;,
 &#39;“To love at all is to be vulnerable. Love anything and your heart will be wrung and possibly broken. If you want to make sure of keeping it intact you must give it to no one, not even an animal. Wrap it carefully round with hobbies and little luxuries; avoid all entanglements. Lock it up safe in the casket or coffin of your selfishness. But in that casket, safe, dark, motionless, airless, it will change. It will not be broken; it will become unbreakable, impenetrable, irredeemable. To love is to be vulnerable.”&#39;,
 &#39;“To the well-organized mind, death is but the next great adventure.”&#39;,
 &#39;“Today you are You, that is truer than true. There is no one alive who is Youer than You.”&#39;,
 &#39;“Try not to become a man of success. Rather become a man of value.”&#39;,
 &#39;“We are not necessarily doubting that God will do the best for us; we are wondering how painful the best will turn out to be.”&#39;,
 &quot;“We read to know we&#39;re not alone.”&quot;,
 &quot;“What really knocks me out is a book that, when you&#39;re all done reading it, you wish the author that wrote it was a terrific friend of yours and you could call him up on the phone whenever you felt like it. That doesn&#39;t happen much, though.”&quot;,
 &#39;“When one door of happiness closes, another opens; but often we look so long at the closed door that we do not see the one which has been opened for us.”&#39;,
 &#39;“You believe lies so you eventually learn to trust no one but yourself.”&#39;,
 &#39;“You can never get a cup of tea large enough or a book long enough to suit me.”&#39;,
 &#39;“You don’t forget the face of the person who was your last hope.”&#39;,
 &#39;“You have to write the book that wants to be written. And if the book will be too difficult for grown-ups, then you write it for children.”&#39;,
 &quot;“You may not be her first, her last, or her only. She loved before she may love again. But if she loves you now, what else matters? She&#39;s not perfect—you aren&#39;t either, and the two of you may never be perfect together but if she can make you laugh, cause you to think twice, and admit to being human and making mistakes, hold onto her and give her the most you can. She may not be thinking about you every second of the day, but she will give you a part of her that she knows you can break—her heart. So don&#39;t hurt her, don&#39;t change her, don&#39;t analyze and don&#39;t expect more than she can give. Smile when she makes you happy, let her know when she makes you mad, and miss her when she&#39;s not there.”&quot;,
 &quot;“You may say I&#39;m a dreamer, but I&#39;m not the only one. I hope someday you&#39;ll join us. And the world will live as one.”&quot;,
 &#39;“You never really understand a person until you consider things from his point of view... Until you climb inside of his skin and walk around in it.”&#39;,
 &quot;“′Classic′ - a book which people praise and don&#39;t read.”&quot;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># haben wir alle zitate extrahiert?</span>
<span class="nb">len</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100
</pre></div>
</div>
</div>
</div>
<p>Diese Lösung nutzt ein python-Set, um die extrahierten Elemente zu speichern. Das ist allerdings etwas unpraktisch, da Sets ungeordnet sind und die Zitate so nicht in chronologischer Reihenfolge gespeichert werden. Es empfiehlt sich deswegen, stattdessen eine Liste zu verwenden:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com/page/&quot;</span>

<span class="n">quotes</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
    <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote &gt; .text&quot;</span><span class="p">):</span>
        <span class="n">quotes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 298 ms, sys: 24.7 ms, total: 323 ms
Wall time: 2.84 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”&#39;,
 &#39;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&#39;,
 &#39;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&#39;,
 &#39;“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”&#39;,
 &quot;“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”&quot;,
 &#39;“Try not to become a man of success. Rather become a man of value.”&#39;,
 &#39;“It is better to be hated for what you are than to be loved for what you are not.”&#39;,
 &quot;“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”&quot;,
 &quot;“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”&quot;,
 &#39;“A day without sunshine is like, you know, night.”&#39;,
 &quot;“This life is what you make it. No matter what, you&#39;re going to mess up sometimes, it&#39;s a universal truth. But the good part is you get to decide how you&#39;re going to mess it up. Girls will be your friends - they&#39;ll act like it anyway. But just remember, some come, some go. The ones that stay with you through everything - they&#39;re your true best friends. Don&#39;t let go of them. Also remember, sisters make the best friends in the world. As for lovers, well, they&#39;ll come and go too. And baby, I hate to say it, most of them - actually pretty much all of them are going to break your heart, but you can&#39;t give up because if you give up, you&#39;ll never find your soulmate. You&#39;ll never find that half who makes you whole and that goes for everything. Just because you fail once, doesn&#39;t mean you&#39;re gonna fail at everything. Keep trying, hold on, and always, always, always believe in yourself, because if you don&#39;t, then who will, sweetie? So keep your head high, keep your chin up, and most importantly, keep smiling, because life&#39;s a beautiful thing and there&#39;s so much to smile about.”&quot;,
 &#39;“It takes a great deal of bravery to stand up to our enemies, but just as much to stand up to our friends.”&#39;,
 &quot;“If you can&#39;t explain it to a six year old, you don&#39;t understand it yourself.”&quot;,
 &quot;“You may not be her first, her last, or her only. She loved before she may love again. But if she loves you now, what else matters? She&#39;s not perfect—you aren&#39;t either, and the two of you may never be perfect together but if she can make you laugh, cause you to think twice, and admit to being human and making mistakes, hold onto her and give her the most you can. She may not be thinking about you every second of the day, but she will give you a part of her that she knows you can break—her heart. So don&#39;t hurt her, don&#39;t change her, don&#39;t analyze and don&#39;t expect more than she can give. Smile when she makes you happy, let her know when she makes you mad, and miss her when she&#39;s not there.”&quot;,
 &#39;“I like nonsense, it wakes up the brain cells. Fantasy is a necessary ingredient in living.”&#39;,
 &#39;“I may not have gone where I intended to go, but I think I have ended up where I needed to be.”&#39;,
 &quot;“The opposite of love is not hate, it&#39;s indifference. The opposite of art is not ugliness, it&#39;s indifference. The opposite of faith is not heresy, it&#39;s indifference. And the opposite of life is not death, it&#39;s indifference.”&quot;,
 &#39;“It is not a lack of love, but a lack of friendship that makes unhappy marriages.”&#39;,
 &#39;“Good friends, good books, and a sleepy conscience: this is the ideal life.”&#39;,
 &#39;“Life is what happens to us while we are making other plans.”&#39;,
 &#39;“I love you without knowing how, or when, or from where. I love you simply, without problems or pride: I love you in this way because I do not know any other way of loving but this, in which there is no I or you, so intimate that your hand upon my chest is my hand, so intimate that when I fall asleep your eyes close.”&#39;,
 &#39;“For every minute you are angry you lose sixty seconds of happiness.”&#39;,
 &#39;“If you judge people, you have no time to love them.”&#39;,
 &#39;“Anyone who thinks sitting in church can make you a Christian must also think that sitting in a garage can make you a car.”&#39;,
 &#39;“Beauty is in the eye of the beholder and it may be necessary from time to time to give a stupid or misinformed beholder a black eye.”&#39;,
 &#39;“Today you are You, that is truer than true. There is no one alive who is Youer than You.”&#39;,
 &#39;“If you want your children to be intelligent, read them fairy tales. If you want them to be more intelligent, read them more fairy tales.”&#39;,
 &#39;“It is impossible to live without failing at something, unless you live so cautiously that you might as well not have lived at all - in which case, you fail by default.”&#39;,
 &#39;“Logic will get you from A to Z; imagination will get you everywhere.”&#39;,
 &#39;“One good thing about music, when it hits you, you feel no pain.”&#39;,
 &quot;“The more that you read, the more things you will know. The more that you learn, the more places you&#39;ll go.”&quot;,
 &#39;“Of course it is happening inside your head, Harry, but why on earth should that mean that it is not real?”&#39;,
 &#39;“The truth is, everyone is going to hurt you. You just got to find the ones worth suffering for.”&#39;,
 &#39;“Not all of us can do great things. But we can do small things with great love.”&#39;,
 &#39;“To the well-organized mind, death is but the next great adventure.”&#39;,
 &quot;“All you need is love. But a little chocolate now and then doesn&#39;t hurt.”&quot;,
 &quot;“We read to know we&#39;re not alone.”&quot;,
 &#39;“Any fool can know. The point is to understand.”&#39;,
 &#39;“I have always imagined that Paradise will be a kind of library.”&#39;,
 &#39;“It is never too late to be what you might have been.”&#39;,
 &#39;“A reader lives a thousand lives before he dies, said Jojen. The man who never reads lives only one.”&#39;,
 &#39;“You can never get a cup of tea large enough or a book long enough to suit me.”&#39;,
 &#39;“You believe lies so you eventually learn to trust no one but yourself.”&#39;,
 &#39;“If you can make a woman laugh, you can make her do anything.”&#39;,
 &#39;“Life is like riding a bicycle. To keep your balance, you must keep moving.”&#39;,
 &#39;“The real lover is the man who can thrill you by kissing your forehead or smiling into your eyes or just staring into space.”&#39;,
 &quot;“A wise girl kisses but doesn&#39;t love, listens but doesn&#39;t believe, and leaves before she is left.”&quot;,
 &#39;“Only in the darkness can you see the stars.”&#39;,
 &#39;“It matters not what someone is born, but what they grow to be.”&#39;,
 &#39;“Love does not begin and end the way we seem to think it does. Love is a battle, love is a war; love is a growing up.”&#39;,
 &#39;“There is nothing I would not do for those who are really my friends. I have no notion of loving people by halves, it is not my nature.”&#39;,
 &#39;“Do one thing every day that scares you.”&#39;,
 &#39;“I am good, but not an angel. I do sin, but I am not the devil. I am just a small girl in a big world trying to find someone to love.”&#39;,
 &#39;“If I were not a physicist, I would probably be a musician. I often think in music. I live my daydreams in music. I see my life in terms of music.”&#39;,
 &#39;“If you only read the books that everyone else is reading, you can only think what everyone else is thinking.”&#39;,
 &#39;“The difference between genius and stupidity is: genius has its limits.”&#39;,
 &quot;“He&#39;s like a drug for you, Bella.”&quot;,
 &#39;“There is no friend as loyal as a book.”&#39;,
 &#39;“When one door of happiness closes, another opens; but often we look so long at the closed door that we do not see the one which has been opened for us.”&#39;,
 &quot;“Life isn&#39;t about finding yourself. Life is about creating yourself.”&quot;,
 &quot;“That&#39;s the problem with drinking, I thought, as I poured myself a drink. If something bad happens you drink in an attempt to forget; if something good happens you drink in order to celebrate; and if nothing happens you drink to make something happen.”&quot;,
 &#39;“You don’t forget the face of the person who was your last hope.”&#39;,
 &quot;“Remember, we&#39;re madly in love, so it&#39;s all right to kiss me anytime you feel like it.”&quot;,
 &#39;“To love at all is to be vulnerable. Love anything and your heart will be wrung and possibly broken. If you want to make sure of keeping it intact you must give it to no one, not even an animal. Wrap it carefully round with hobbies and little luxuries; avoid all entanglements. Lock it up safe in the casket or coffin of your selfishness. But in that casket, safe, dark, motionless, airless, it will change. It will not be broken; it will become unbreakable, impenetrable, irredeemable. To love is to be vulnerable.”&#39;,
 &#39;“Not all those who wander are lost.”&#39;,
 &#39;“Do not pity the dead, Harry. Pity the living, and, above all those who live without love.”&#39;,
 &#39;“There is nothing to writing. All you do is sit down at a typewriter and bleed.”&#39;,
 &#39;“Finish each day and be done with it. You have done what you could. Some blunders and absurdities no doubt crept in; forget them as soon as you can. Tomorrow is a new day. You shall begin it serenely and with too high a spirit to be encumbered with your old nonsense.”&#39;,
 &#39;“I have never let my schooling interfere with my education.”&#39;,
 &quot;“I have heard there are troubles of more than one kind. Some come from ahead and some come from behind. But I&#39;ve bought a big bat. I&#39;m all ready you see. Now my troubles are going to have troubles with me!”&quot;,
 &#39;“If I had a flower for every time I thought of you...I could walk through my garden forever.”&#39;,
 &#39;“Some people never go crazy. What truly horrible lives they must lead.”&#39;,
 &#39;“The trouble with having an open mind, of course, is that people will insist on coming along and trying to put things in it.”&#39;,
 &#39;“Think left and think right and think low and think high. Oh, the thinks you can think up if only you try!”&#39;,
 &quot;“What really knocks me out is a book that, when you&#39;re all done reading it, you wish the author that wrote it was a terrific friend of yours and you could call him up on the phone whenever you felt like it. That doesn&#39;t happen much, though.”&quot;,
 &#39;“The reason I talk to myself is because I’m the only one whose answers I accept.”&#39;,
 &quot;“You may say I&#39;m a dreamer, but I&#39;m not the only one. I hope someday you&#39;ll join us. And the world will live as one.”&quot;,
 &#39;“I am free of all prejudice. I hate everyone equally. ”&#39;,
 &quot;“The question isn&#39;t who is going to let me; it&#39;s who is going to stop me.”&quot;,
 &quot;“′Classic′ - a book which people praise and don&#39;t read.”&quot;,
 &#39;“Anyone who has never made a mistake has never tried anything new.”&#39;,
 &quot;“A lady&#39;s imagination is very rapid; it jumps from admiration to love, from love to matrimony in a moment.”&quot;,
 &#39;“Remember, if the time should come when you have to make a choice between what is right and what is easy, remember what happened to a boy who was good, and kind, and brave, because he strayed across the path of Lord Voldemort. Remember Cedric Diggory.”&#39;,
 &#39;“I declare after all there is no enjoyment like reading! How much sooner one tires of any thing than of a book! -- When I have a house of my own, I shall be miserable if I have not an excellent library.”&#39;,
 &#39;“There are few people whom I really love, and still fewer of whom I think well. The more I see of the world, the more am I dissatisfied with it; and every day confirms my belief of the inconsistency of all human characters, and of the little dependence that can be placed on the appearance of merit or sense.”&#39;,
 &#39;“Some day you will be old enough to start reading fairy tales again.”&#39;,
 &#39;“We are not necessarily doubting that God will do the best for us; we are wondering how painful the best will turn out to be.”&#39;,
 &#39;“The fear of death follows from the fear of life. A man who lives fully is prepared to die at any time.”&#39;,
 &#39;“A lie can travel half way around the world while the truth is putting on its shoes.”&#39;,
 &#39;“I believe in Christianity as I believe that the sun has risen: not only because I see it, but because by it I see everything else.”&#39;,
 &#39;“The truth.&quot; Dumbledore sighed. &quot;It is a beautiful and terrible thing, and should therefore be treated with great caution.”&#39;,
 &quot;“I&#39;m the one that&#39;s got to die when it&#39;s time for me to die, so let me live my life the way I want to.”&quot;,
 &#39;“To die will be an awfully big adventure.”&#39;,
 &#39;“It takes courage to grow up and become who you really are.”&#39;,
 &#39;“But better to get hurt by the truth than comforted with a lie.”&#39;,
 &#39;“You never really understand a person until you consider things from his point of view... Until you climb inside of his skin and walk around in it.”&#39;,
 &#39;“You have to write the book that wants to be written. And if the book will be too difficult for grown-ups, then you write it for children.”&#39;,
 &#39;“Never tell the truth to people who are not worthy of it.”&#39;,
 &quot;“A person&#39;s a person, no matter how small.”&quot;,
 &#39;“... a mind needs books as a sword needs a whetstone, if it is to keep its edge.”&#39;]
</pre></div>
</div>
</div>
</div>
<p>Die Ausgabe von %%time und %%memit zeigen, dass die Nutzung des Sets keinen (Effizienz-) Vorteil gegenüber Listen hat: Wir können also genausogut eine Liste verwenden.</p>
</section>
<section id="losung-mit-while-schleife-unbekannte-anzahl-von-unterseiten">
<h3>Lösung mit while-Schleife: unbekannte Anzahl von Unterseiten<a class="headerlink" href="#losung-mit-while-schleife-unbekannte-anzahl-von-unterseiten" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>
<span class="c1"># while-Schleife mit Set</span>
<span class="c1"># Lösung wieder von GitHub-Nutzer:in Bhavya Bindela: https://bhavyasree.github.io/PythonClass/Notebooks/18.scrape-quotes/ . Angepasst für die Extraktion von Zitaten statt Autor:innen</span>

<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

<span class="n">page_no</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com/page/&quot;</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page_no</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>

    <span class="c1"># Das funktioniert nur für die Seite quotes.toscrape.com</span>
    <span class="c1"># Für andere Seiten könnte hier die Bedingung if page.status_code != 200</span>
    <span class="c1"># getestet werden</span>
    <span class="k">if</span> <span class="s2">&quot;No quotes found!&quot;</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
        <span class="k">break</span>

    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote &gt; .text&quot;</span><span class="p">):</span>
        <span class="n">quotes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="n">page_no</span> <span class="o">+=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 268 ms, sys: 24.1 ms, total: 292 ms
Wall time: 3.32 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;“... a mind needs books as a sword needs a whetstone, if it is to keep its edge.”&#39;,
 &#39;“A day without sunshine is like, you know, night.”&#39;,
 &quot;“A lady&#39;s imagination is very rapid; it jumps from admiration to love, from love to matrimony in a moment.”&quot;,
 &#39;“A lie can travel half way around the world while the truth is putting on its shoes.”&#39;,
 &quot;“A person&#39;s a person, no matter how small.”&quot;,
 &#39;“A reader lives a thousand lives before he dies, said Jojen. The man who never reads lives only one.”&#39;,
 &quot;“A wise girl kisses but doesn&#39;t love, listens but doesn&#39;t believe, and leaves before she is left.”&quot;,
 &quot;“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”&quot;,
 &quot;“All you need is love. But a little chocolate now and then doesn&#39;t hurt.”&quot;,
 &#39;“Any fool can know. The point is to understand.”&#39;,
 &#39;“Anyone who has never made a mistake has never tried anything new.”&#39;,
 &#39;“Anyone who thinks sitting in church can make you a Christian must also think that sitting in a garage can make you a car.”&#39;,
 &#39;“Beauty is in the eye of the beholder and it may be necessary from time to time to give a stupid or misinformed beholder a black eye.”&#39;,
 &#39;“But better to get hurt by the truth than comforted with a lie.”&#39;,
 &#39;“Do not pity the dead, Harry. Pity the living, and, above all those who live without love.”&#39;,
 &#39;“Do one thing every day that scares you.”&#39;,
 &#39;“Finish each day and be done with it. You have done what you could. Some blunders and absurdities no doubt crept in; forget them as soon as you can. Tomorrow is a new day. You shall begin it serenely and with too high a spirit to be encumbered with your old nonsense.”&#39;,
 &#39;“For every minute you are angry you lose sixty seconds of happiness.”&#39;,
 &#39;“Good friends, good books, and a sleepy conscience: this is the ideal life.”&#39;,
 &quot;“He&#39;s like a drug for you, Bella.”&quot;,
 &#39;“I am free of all prejudice. I hate everyone equally. ”&#39;,
 &#39;“I am good, but not an angel. I do sin, but I am not the devil. I am just a small girl in a big world trying to find someone to love.”&#39;,
 &#39;“I believe in Christianity as I believe that the sun has risen: not only because I see it, but because by it I see everything else.”&#39;,
 &#39;“I declare after all there is no enjoyment like reading! How much sooner one tires of any thing than of a book! -- When I have a house of my own, I shall be miserable if I have not an excellent library.”&#39;,
 &#39;“I have always imagined that Paradise will be a kind of library.”&#39;,
 &quot;“I have heard there are troubles of more than one kind. Some come from ahead and some come from behind. But I&#39;ve bought a big bat. I&#39;m all ready you see. Now my troubles are going to have troubles with me!”&quot;,
 &#39;“I have never let my schooling interfere with my education.”&#39;,
 &quot;“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”&quot;,
 &#39;“I like nonsense, it wakes up the brain cells. Fantasy is a necessary ingredient in living.”&#39;,
 &#39;“I love you without knowing how, or when, or from where. I love you simply, without problems or pride: I love you in this way because I do not know any other way of loving but this, in which there is no I or you, so intimate that your hand upon my chest is my hand, so intimate that when I fall asleep your eyes close.”&#39;,
 &#39;“I may not have gone where I intended to go, but I think I have ended up where I needed to be.”&#39;,
 &quot;“I&#39;m the one that&#39;s got to die when it&#39;s time for me to die, so let me live my life the way I want to.”&quot;,
 &#39;“If I had a flower for every time I thought of you...I could walk through my garden forever.”&#39;,
 &#39;“If I were not a physicist, I would probably be a musician. I often think in music. I live my daydreams in music. I see my life in terms of music.”&#39;,
 &#39;“If you can make a woman laugh, you can make her do anything.”&#39;,
 &quot;“If you can&#39;t explain it to a six year old, you don&#39;t understand it yourself.”&quot;,
 &#39;“If you judge people, you have no time to love them.”&#39;,
 &#39;“If you only read the books that everyone else is reading, you can only think what everyone else is thinking.”&#39;,
 &#39;“If you want your children to be intelligent, read them fairy tales. If you want them to be more intelligent, read them more fairy tales.”&#39;,
 &quot;“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”&quot;,
 &#39;“It is better to be hated for what you are than to be loved for what you are not.”&#39;,
 &#39;“It is impossible to live without failing at something, unless you live so cautiously that you might as well not have lived at all - in which case, you fail by default.”&#39;,
 &#39;“It is never too late to be what you might have been.”&#39;,
 &#39;“It is not a lack of love, but a lack of friendship that makes unhappy marriages.”&#39;,
 &#39;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&#39;,
 &#39;“It matters not what someone is born, but what they grow to be.”&#39;,
 &#39;“It takes a great deal of bravery to stand up to our enemies, but just as much to stand up to our friends.”&#39;,
 &#39;“It takes courage to grow up and become who you really are.”&#39;,
 &#39;“Life is like riding a bicycle. To keep your balance, you must keep moving.”&#39;,
 &#39;“Life is what happens to us while we are making other plans.”&#39;,
 &quot;“Life isn&#39;t about finding yourself. Life is about creating yourself.”&quot;,
 &#39;“Logic will get you from A to Z; imagination will get you everywhere.”&#39;,
 &#39;“Love does not begin and end the way we seem to think it does. Love is a battle, love is a war; love is a growing up.”&#39;,
 &#39;“Never tell the truth to people who are not worthy of it.”&#39;,
 &#39;“Not all of us can do great things. But we can do small things with great love.”&#39;,
 &#39;“Not all those who wander are lost.”&#39;,
 &#39;“Of course it is happening inside your head, Harry, but why on earth should that mean that it is not real?”&#39;,
 &#39;“One good thing about music, when it hits you, you feel no pain.”&#39;,
 &#39;“Only in the darkness can you see the stars.”&#39;,
 &#39;“Remember, if the time should come when you have to make a choice between what is right and what is easy, remember what happened to a boy who was good, and kind, and brave, because he strayed across the path of Lord Voldemort. Remember Cedric Diggory.”&#39;,
 &quot;“Remember, we&#39;re madly in love, so it&#39;s all right to kiss me anytime you feel like it.”&quot;,
 &#39;“Some day you will be old enough to start reading fairy tales again.”&#39;,
 &#39;“Some people never go crazy. What truly horrible lives they must lead.”&#39;,
 &quot;“That&#39;s the problem with drinking, I thought, as I poured myself a drink. If something bad happens you drink in an attempt to forget; if something good happens you drink in order to celebrate; and if nothing happens you drink to make something happen.”&quot;,
 &#39;“The difference between genius and stupidity is: genius has its limits.”&#39;,
 &#39;“The fear of death follows from the fear of life. A man who lives fully is prepared to die at any time.”&#39;,
 &quot;“The more that you read, the more things you will know. The more that you learn, the more places you&#39;ll go.”&quot;,
 &quot;“The opposite of love is not hate, it&#39;s indifference. The opposite of art is not ugliness, it&#39;s indifference. The opposite of faith is not heresy, it&#39;s indifference. And the opposite of life is not death, it&#39;s indifference.”&quot;,
 &#39;“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”&#39;,
 &quot;“The question isn&#39;t who is going to let me; it&#39;s who is going to stop me.”&quot;,
 &#39;“The real lover is the man who can thrill you by kissing your forehead or smiling into your eyes or just staring into space.”&#39;,
 &#39;“The reason I talk to myself is because I’m the only one whose answers I accept.”&#39;,
 &#39;“The trouble with having an open mind, of course, is that people will insist on coming along and trying to put things in it.”&#39;,
 &#39;“The truth is, everyone is going to hurt you. You just got to find the ones worth suffering for.”&#39;,
 &#39;“The truth.&quot; Dumbledore sighed. &quot;It is a beautiful and terrible thing, and should therefore be treated with great caution.”&#39;,
 &#39;“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”&#39;,
 &#39;“There are few people whom I really love, and still fewer of whom I think well. The more I see of the world, the more am I dissatisfied with it; and every day confirms my belief of the inconsistency of all human characters, and of the little dependence that can be placed on the appearance of merit or sense.”&#39;,
 &#39;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&#39;,
 &#39;“There is no friend as loyal as a book.”&#39;,
 &#39;“There is nothing I would not do for those who are really my friends. I have no notion of loving people by halves, it is not my nature.”&#39;,
 &#39;“There is nothing to writing. All you do is sit down at a typewriter and bleed.”&#39;,
 &#39;“Think left and think right and think low and think high. Oh, the thinks you can think up if only you try!”&#39;,
 &quot;“This life is what you make it. No matter what, you&#39;re going to mess up sometimes, it&#39;s a universal truth. But the good part is you get to decide how you&#39;re going to mess it up. Girls will be your friends - they&#39;ll act like it anyway. But just remember, some come, some go. The ones that stay with you through everything - they&#39;re your true best friends. Don&#39;t let go of them. Also remember, sisters make the best friends in the world. As for lovers, well, they&#39;ll come and go too. And baby, I hate to say it, most of them - actually pretty much all of them are going to break your heart, but you can&#39;t give up because if you give up, you&#39;ll never find your soulmate. You&#39;ll never find that half who makes you whole and that goes for everything. Just because you fail once, doesn&#39;t mean you&#39;re gonna fail at everything. Keep trying, hold on, and always, always, always believe in yourself, because if you don&#39;t, then who will, sweetie? So keep your head high, keep your chin up, and most importantly, keep smiling, because life&#39;s a beautiful thing and there&#39;s so much to smile about.”&quot;,
 &#39;“To die will be an awfully big adventure.”&#39;,
 &#39;“To love at all is to be vulnerable. Love anything and your heart will be wrung and possibly broken. If you want to make sure of keeping it intact you must give it to no one, not even an animal. Wrap it carefully round with hobbies and little luxuries; avoid all entanglements. Lock it up safe in the casket or coffin of your selfishness. But in that casket, safe, dark, motionless, airless, it will change. It will not be broken; it will become unbreakable, impenetrable, irredeemable. To love is to be vulnerable.”&#39;,
 &#39;“To the well-organized mind, death is but the next great adventure.”&#39;,
 &#39;“Today you are You, that is truer than true. There is no one alive who is Youer than You.”&#39;,
 &#39;“Try not to become a man of success. Rather become a man of value.”&#39;,
 &#39;“We are not necessarily doubting that God will do the best for us; we are wondering how painful the best will turn out to be.”&#39;,
 &quot;“We read to know we&#39;re not alone.”&quot;,
 &quot;“What really knocks me out is a book that, when you&#39;re all done reading it, you wish the author that wrote it was a terrific friend of yours and you could call him up on the phone whenever you felt like it. That doesn&#39;t happen much, though.”&quot;,
 &#39;“When one door of happiness closes, another opens; but often we look so long at the closed door that we do not see the one which has been opened for us.”&#39;,
 &#39;“You believe lies so you eventually learn to trust no one but yourself.”&#39;,
 &#39;“You can never get a cup of tea large enough or a book long enough to suit me.”&#39;,
 &#39;“You don’t forget the face of the person who was your last hope.”&#39;,
 &#39;“You have to write the book that wants to be written. And if the book will be too difficult for grown-ups, then you write it for children.”&#39;,
 &quot;“You may not be her first, her last, or her only. She loved before she may love again. But if she loves you now, what else matters? She&#39;s not perfect—you aren&#39;t either, and the two of you may never be perfect together but if she can make you laugh, cause you to think twice, and admit to being human and making mistakes, hold onto her and give her the most you can. She may not be thinking about you every second of the day, but she will give you a part of her that she knows you can break—her heart. So don&#39;t hurt her, don&#39;t change her, don&#39;t analyze and don&#39;t expect more than she can give. Smile when she makes you happy, let her know when she makes you mad, and miss her when she&#39;s not there.”&quot;,
 &quot;“You may say I&#39;m a dreamer, but I&#39;m not the only one. I hope someday you&#39;ll join us. And the world will live as one.”&quot;,
 &#39;“You never really understand a person until you consider things from his point of view... Until you climb inside of his skin and walk around in it.”&#39;,
 &quot;“′Classic′ - a book which people praise and don&#39;t read.”&quot;}
</pre></div>
</div>
</div>
</div>
<p>Die Zeile, die auf den ersten Blick verwundert, ist wahrscheinlich die if-Anweisung: if ‘No quotes found!’ in page.text: break.
Was hat es damit auf sich?
Die Macher:innen der Seite quotes.toscrape haben sich überlegt, dass auch Seiten, auf denen keine Zitate mehr publiziert sind, existieren sollen, sodass eine HTTP-Anfrage für diese Seiten einen Erfolgscode 200 zurückgeben. Wenn die Seiten nicht existieren würden, könnte einfach die while-Schleife in Abhängigkeit von dem Statuscode abgebrochen werden.</p>
<p>Das können wir im Vergleich mit einer anderen Seite illustrieren:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># warum if &#39;No quotes found!&#39; ...?</span>
<span class="c1"># Es gibt eine seite 99999: Das ist nur ausnahmsweise auf der Seite quotes.toscrape so.</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/page/9999&quot;</span><span class="p">)</span>
<span class="n">page</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>200
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Auf dieser Seite steht ein einziger Satz</span>
<span class="c1"># Durchsucht den String nach dem Satz: Welcher ist es?</span>
<span class="n">page</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n\t&lt;meta charset=&quot;UTF-8&quot;&gt;\n\t&lt;title&gt;Quotes to Scrape&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/bootstrap.min.css&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/main.css&quot;&gt;\n    \n    \n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row header-box&quot;&gt;\n            &lt;div class=&quot;col-md-8&quot;&gt;\n                &lt;h1&gt;\n                    &lt;a href=&quot;/&quot; style=&quot;text-decoration: none&quot;&gt;Quotes to Scrape&lt;/a&gt;\n                &lt;/h1&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;col-md-4&quot;&gt;\n                &lt;p&gt;\n                \n                    &lt;a href=&quot;/login&quot;&gt;Login&lt;/a&gt;\n                \n                &lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    \n\n&lt;div class=&quot;row&quot;&gt;\n    &lt;div class=&quot;col-md-8&quot;&gt;\n\nNo quotes found!\n\n    &lt;nav&gt;\n        &lt;ul class=&quot;pager&quot;&gt;\n            \n            &lt;li class=&quot;previous&quot;&gt;\n                &lt;a href=&quot;/page/9998/&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;larr;&lt;/span&gt; Previous&lt;/a&gt;\n            &lt;/li&gt;\n            \n            \n        &lt;/ul&gt;\n    &lt;/nav&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;col-md-4 tags-box&quot;&gt;\n        \n            &lt;h2&gt;Top Ten tags&lt;/h2&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 28px&quot; href=&quot;/tag/love/&quot;&gt;love&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 26px&quot; href=&quot;/tag/inspirational/&quot;&gt;inspirational&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 26px&quot; href=&quot;/tag/life/&quot;&gt;life&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 24px&quot; href=&quot;/tag/humor/&quot;&gt;humor&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 22px&quot; href=&quot;/tag/books/&quot;&gt;books&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 14px&quot; href=&quot;/tag/reading/&quot;&gt;reading&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 10px&quot; href=&quot;/tag/friendship/&quot;&gt;friendship&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 8px&quot; href=&quot;/tag/friends/&quot;&gt;friends&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 8px&quot; href=&quot;/tag/truth/&quot;&gt;truth&lt;/a&gt;\n            &lt;/span&gt;\n            \n            &lt;span class=&quot;tag-item&quot;&gt;\n            &lt;a class=&quot;tag&quot; style=&quot;font-size: 6px&quot; href=&quot;/tag/simile/&quot;&gt;simile&lt;/a&gt;\n            &lt;/span&gt;\n            \n        \n    &lt;/div&gt;\n&lt;/div&gt;\n\n    &lt;/div&gt;\n    &lt;footer class=&quot;footer&quot;&gt;\n        &lt;div class=&quot;container&quot;&gt;\n            &lt;p class=&quot;text-muted&quot;&gt;\n                Quotes by: &lt;a href=&quot;https://www.goodreads.com/quotes&quot;&gt;GoodReads.com&lt;/a&gt;\n            &lt;/p&gt;\n            &lt;p class=&quot;copyright&quot;&gt;\n                Made with &lt;span class=\&#39;zyte\&#39;&gt;❤&lt;/span&gt; by &lt;a class=\&#39;zyte\&#39; href=&quot;https://www.zyte.com&quot;&gt;Zyte&lt;/a&gt;\n            &lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n&lt;/body&gt;\n&lt;/html&gt;&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Anders wäre es z.B. hier:</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.projekt-gutenberg.org/balzac/kurtisa2/chap001.html&quot;</span><span class="p">)</span>
<span class="n">page</span><span class="o">.</span><span class="n">status_code</span> <span class="c1"># 200</span>
<span class="c1"># Es gibt keine Seite 99999</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.projekt-gutenberg.org/balzac/kurtisa2/chap99999.html&quot;</span><span class="p">)</span>
<span class="n">page</span><span class="o">.</span><span class="n">status_code</span> <span class="c1"># 404</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>404
</pre></div>
</div>
</div>
</div>
<p>Auch die while-Schleife können wir wieder zum Erstellen einer Liste anstelle eines Sets verwenden:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>
<span class="c1"># while-Schleife mit Liste</span>

<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

<span class="n">page_no</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com/page/&quot;</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page_no</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;No quotes found!&quot;</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
        <span class="k">break</span>

    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote &gt; .text&quot;</span><span class="p">):</span>
        <span class="n">quotes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="n">page_no</span> <span class="o">+=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 347 ms, sys: 30.7 ms, total: 378 ms
Wall time: 3.36 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;“The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”&#39;,
 &#39;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&#39;,
 &#39;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&#39;,
 &#39;“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”&#39;,
 &quot;“Imperfection is beauty, madness is genius and it&#39;s better to be absolutely ridiculous than absolutely boring.”&quot;,
 &#39;“Try not to become a man of success. Rather become a man of value.”&#39;,
 &#39;“It is better to be hated for what you are than to be loved for what you are not.”&#39;,
 &quot;“I have not failed. I&#39;ve just found 10,000 ways that won&#39;t work.”&quot;,
 &quot;“A woman is like a tea bag; you never know how strong it is until it&#39;s in hot water.”&quot;,
 &#39;“A day without sunshine is like, you know, night.”&#39;,
 &quot;“This life is what you make it. No matter what, you&#39;re going to mess up sometimes, it&#39;s a universal truth. But the good part is you get to decide how you&#39;re going to mess it up. Girls will be your friends - they&#39;ll act like it anyway. But just remember, some come, some go. The ones that stay with you through everything - they&#39;re your true best friends. Don&#39;t let go of them. Also remember, sisters make the best friends in the world. As for lovers, well, they&#39;ll come and go too. And baby, I hate to say it, most of them - actually pretty much all of them are going to break your heart, but you can&#39;t give up because if you give up, you&#39;ll never find your soulmate. You&#39;ll never find that half who makes you whole and that goes for everything. Just because you fail once, doesn&#39;t mean you&#39;re gonna fail at everything. Keep trying, hold on, and always, always, always believe in yourself, because if you don&#39;t, then who will, sweetie? So keep your head high, keep your chin up, and most importantly, keep smiling, because life&#39;s a beautiful thing and there&#39;s so much to smile about.”&quot;,
 &#39;“It takes a great deal of bravery to stand up to our enemies, but just as much to stand up to our friends.”&#39;,
 &quot;“If you can&#39;t explain it to a six year old, you don&#39;t understand it yourself.”&quot;,
 &quot;“You may not be her first, her last, or her only. She loved before she may love again. But if she loves you now, what else matters? She&#39;s not perfect—you aren&#39;t either, and the two of you may never be perfect together but if she can make you laugh, cause you to think twice, and admit to being human and making mistakes, hold onto her and give her the most you can. She may not be thinking about you every second of the day, but she will give you a part of her that she knows you can break—her heart. So don&#39;t hurt her, don&#39;t change her, don&#39;t analyze and don&#39;t expect more than she can give. Smile when she makes you happy, let her know when she makes you mad, and miss her when she&#39;s not there.”&quot;,
 &#39;“I like nonsense, it wakes up the brain cells. Fantasy is a necessary ingredient in living.”&#39;,
 &#39;“I may not have gone where I intended to go, but I think I have ended up where I needed to be.”&#39;,
 &quot;“The opposite of love is not hate, it&#39;s indifference. The opposite of art is not ugliness, it&#39;s indifference. The opposite of faith is not heresy, it&#39;s indifference. And the opposite of life is not death, it&#39;s indifference.”&quot;,
 &#39;“It is not a lack of love, but a lack of friendship that makes unhappy marriages.”&#39;,
 &#39;“Good friends, good books, and a sleepy conscience: this is the ideal life.”&#39;,
 &#39;“Life is what happens to us while we are making other plans.”&#39;,
 &#39;“I love you without knowing how, or when, or from where. I love you simply, without problems or pride: I love you in this way because I do not know any other way of loving but this, in which there is no I or you, so intimate that your hand upon my chest is my hand, so intimate that when I fall asleep your eyes close.”&#39;,
 &#39;“For every minute you are angry you lose sixty seconds of happiness.”&#39;,
 &#39;“If you judge people, you have no time to love them.”&#39;,
 &#39;“Anyone who thinks sitting in church can make you a Christian must also think that sitting in a garage can make you a car.”&#39;,
 &#39;“Beauty is in the eye of the beholder and it may be necessary from time to time to give a stupid or misinformed beholder a black eye.”&#39;,
 &#39;“Today you are You, that is truer than true. There is no one alive who is Youer than You.”&#39;,
 &#39;“If you want your children to be intelligent, read them fairy tales. If you want them to be more intelligent, read them more fairy tales.”&#39;,
 &#39;“It is impossible to live without failing at something, unless you live so cautiously that you might as well not have lived at all - in which case, you fail by default.”&#39;,
 &#39;“Logic will get you from A to Z; imagination will get you everywhere.”&#39;,
 &#39;“One good thing about music, when it hits you, you feel no pain.”&#39;,
 &quot;“The more that you read, the more things you will know. The more that you learn, the more places you&#39;ll go.”&quot;,
 &#39;“Of course it is happening inside your head, Harry, but why on earth should that mean that it is not real?”&#39;,
 &#39;“The truth is, everyone is going to hurt you. You just got to find the ones worth suffering for.”&#39;,
 &#39;“Not all of us can do great things. But we can do small things with great love.”&#39;,
 &#39;“To the well-organized mind, death is but the next great adventure.”&#39;,
 &quot;“All you need is love. But a little chocolate now and then doesn&#39;t hurt.”&quot;,
 &quot;“We read to know we&#39;re not alone.”&quot;,
 &#39;“Any fool can know. The point is to understand.”&#39;,
 &#39;“I have always imagined that Paradise will be a kind of library.”&#39;,
 &#39;“It is never too late to be what you might have been.”&#39;,
 &#39;“A reader lives a thousand lives before he dies, said Jojen. The man who never reads lives only one.”&#39;,
 &#39;“You can never get a cup of tea large enough or a book long enough to suit me.”&#39;,
 &#39;“You believe lies so you eventually learn to trust no one but yourself.”&#39;,
 &#39;“If you can make a woman laugh, you can make her do anything.”&#39;,
 &#39;“Life is like riding a bicycle. To keep your balance, you must keep moving.”&#39;,
 &#39;“The real lover is the man who can thrill you by kissing your forehead or smiling into your eyes or just staring into space.”&#39;,
 &quot;“A wise girl kisses but doesn&#39;t love, listens but doesn&#39;t believe, and leaves before she is left.”&quot;,
 &#39;“Only in the darkness can you see the stars.”&#39;,
 &#39;“It matters not what someone is born, but what they grow to be.”&#39;,
 &#39;“Love does not begin and end the way we seem to think it does. Love is a battle, love is a war; love is a growing up.”&#39;,
 &#39;“There is nothing I would not do for those who are really my friends. I have no notion of loving people by halves, it is not my nature.”&#39;,
 &#39;“Do one thing every day that scares you.”&#39;,
 &#39;“I am good, but not an angel. I do sin, but I am not the devil. I am just a small girl in a big world trying to find someone to love.”&#39;,
 &#39;“If I were not a physicist, I would probably be a musician. I often think in music. I live my daydreams in music. I see my life in terms of music.”&#39;,
 &#39;“If you only read the books that everyone else is reading, you can only think what everyone else is thinking.”&#39;,
 &#39;“The difference between genius and stupidity is: genius has its limits.”&#39;,
 &quot;“He&#39;s like a drug for you, Bella.”&quot;,
 &#39;“There is no friend as loyal as a book.”&#39;,
 &#39;“When one door of happiness closes, another opens; but often we look so long at the closed door that we do not see the one which has been opened for us.”&#39;,
 &quot;“Life isn&#39;t about finding yourself. Life is about creating yourself.”&quot;,
 &quot;“That&#39;s the problem with drinking, I thought, as I poured myself a drink. If something bad happens you drink in an attempt to forget; if something good happens you drink in order to celebrate; and if nothing happens you drink to make something happen.”&quot;,
 &#39;“You don’t forget the face of the person who was your last hope.”&#39;,
 &quot;“Remember, we&#39;re madly in love, so it&#39;s all right to kiss me anytime you feel like it.”&quot;,
 &#39;“To love at all is to be vulnerable. Love anything and your heart will be wrung and possibly broken. If you want to make sure of keeping it intact you must give it to no one, not even an animal. Wrap it carefully round with hobbies and little luxuries; avoid all entanglements. Lock it up safe in the casket or coffin of your selfishness. But in that casket, safe, dark, motionless, airless, it will change. It will not be broken; it will become unbreakable, impenetrable, irredeemable. To love is to be vulnerable.”&#39;,
 &#39;“Not all those who wander are lost.”&#39;,
 &#39;“Do not pity the dead, Harry. Pity the living, and, above all those who live without love.”&#39;,
 &#39;“There is nothing to writing. All you do is sit down at a typewriter and bleed.”&#39;,
 &#39;“Finish each day and be done with it. You have done what you could. Some blunders and absurdities no doubt crept in; forget them as soon as you can. Tomorrow is a new day. You shall begin it serenely and with too high a spirit to be encumbered with your old nonsense.”&#39;,
 &#39;“I have never let my schooling interfere with my education.”&#39;,
 &quot;“I have heard there are troubles of more than one kind. Some come from ahead and some come from behind. But I&#39;ve bought a big bat. I&#39;m all ready you see. Now my troubles are going to have troubles with me!”&quot;,
 &#39;“If I had a flower for every time I thought of you...I could walk through my garden forever.”&#39;,
 &#39;“Some people never go crazy. What truly horrible lives they must lead.”&#39;,
 &#39;“The trouble with having an open mind, of course, is that people will insist on coming along and trying to put things in it.”&#39;,
 &#39;“Think left and think right and think low and think high. Oh, the thinks you can think up if only you try!”&#39;,
 &quot;“What really knocks me out is a book that, when you&#39;re all done reading it, you wish the author that wrote it was a terrific friend of yours and you could call him up on the phone whenever you felt like it. That doesn&#39;t happen much, though.”&quot;,
 &#39;“The reason I talk to myself is because I’m the only one whose answers I accept.”&#39;,
 &quot;“You may say I&#39;m a dreamer, but I&#39;m not the only one. I hope someday you&#39;ll join us. And the world will live as one.”&quot;,
 &#39;“I am free of all prejudice. I hate everyone equally. ”&#39;,
 &quot;“The question isn&#39;t who is going to let me; it&#39;s who is going to stop me.”&quot;,
 &quot;“′Classic′ - a book which people praise and don&#39;t read.”&quot;,
 &#39;“Anyone who has never made a mistake has never tried anything new.”&#39;,
 &quot;“A lady&#39;s imagination is very rapid; it jumps from admiration to love, from love to matrimony in a moment.”&quot;,
 &#39;“Remember, if the time should come when you have to make a choice between what is right and what is easy, remember what happened to a boy who was good, and kind, and brave, because he strayed across the path of Lord Voldemort. Remember Cedric Diggory.”&#39;,
 &#39;“I declare after all there is no enjoyment like reading! How much sooner one tires of any thing than of a book! -- When I have a house of my own, I shall be miserable if I have not an excellent library.”&#39;,
 &#39;“There are few people whom I really love, and still fewer of whom I think well. The more I see of the world, the more am I dissatisfied with it; and every day confirms my belief of the inconsistency of all human characters, and of the little dependence that can be placed on the appearance of merit or sense.”&#39;,
 &#39;“Some day you will be old enough to start reading fairy tales again.”&#39;,
 &#39;“We are not necessarily doubting that God will do the best for us; we are wondering how painful the best will turn out to be.”&#39;,
 &#39;“The fear of death follows from the fear of life. A man who lives fully is prepared to die at any time.”&#39;,
 &#39;“A lie can travel half way around the world while the truth is putting on its shoes.”&#39;,
 &#39;“I believe in Christianity as I believe that the sun has risen: not only because I see it, but because by it I see everything else.”&#39;,
 &#39;“The truth.&quot; Dumbledore sighed. &quot;It is a beautiful and terrible thing, and should therefore be treated with great caution.”&#39;,
 &quot;“I&#39;m the one that&#39;s got to die when it&#39;s time for me to die, so let me live my life the way I want to.”&quot;,
 &#39;“To die will be an awfully big adventure.”&#39;,
 &#39;“It takes courage to grow up and become who you really are.”&#39;,
 &#39;“But better to get hurt by the truth than comforted with a lie.”&#39;,
 &#39;“You never really understand a person until you consider things from his point of view... Until you climb inside of his skin and walk around in it.”&#39;,
 &#39;“You have to write the book that wants to be written. And if the book will be too difficult for grown-ups, then you write it for children.”&#39;,
 &#39;“Never tell the truth to people who are not worthy of it.”&#39;,
 &quot;“A person&#39;s a person, no matter how small.”&quot;,
 &#39;“... a mind needs books as a sword needs a whetstone, if it is to keep its edge.”&#39;]
</pre></div>
</div>
</div>
</div>
<p>Anstatt die while-Schleife wie bisher abzubrechen, wenn “No quotes found!” auf der Seite steht, kann auch der Next-Button unten rechts auf der Seite zur Formulierung einer Abbruchbedingung genutzt werden. Den Next-Button gibt es nämlich nur auf Seiten, die auch Zitate enthalten. Wir können also eine while-Schleife konstruieren, die zunächst nur den Inhalt der ersten Seite extrahiert, und anschließend den Inhalt aller Unterseiten, die ein Element mit der Klasse “next” haben. Das Element mit der Klasse “next” hat ein a-Element als Kindelement, dessen Attribut “href” als Wert den relativen Pfad der nächsten Unterseite enthält, also zum Beispiel “/page/2”, “/page/3”, usw. In jedem Schleifendurchlauf wird überprüft, ob die aktuelle Seite ein a-Element enthält, das Kindelement von einem Element mit der Klasse “next” ist. Wenn kein solches Element gefunden wird, dann wird die Schleife mithilfe einer break-Anweisung abgrebrochen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com&quot;</span>
<span class="n">current_url</span> <span class="o">=</span> <span class="n">base_url</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">current_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote &gt; .text&quot;</span><span class="p">):</span>
        <span class="n">quotes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="n">next_elem</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.next &gt; a&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">next_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">next_path</span> <span class="o">=</span> <span class="n">next_elem</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="c1"># auf den Wert des Attributs &quot;href&quot; zugreifen</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">next_path</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 260 ms, sys: 12.7 ms, total: 273 ms
Wall time: 1.94 s
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="zitate-von-allen-seiten-extrahieren-mit-metadaten">
<h2>Zitate von allen Seiten extrahieren, mit Metadaten<a class="headerlink" href="#zitate-von-allen-seiten-extrahieren-mit-metadaten" title="Link to this heading">#</a></h2>
<section id="losung-mit-for-schleife">
<h3>Lösung mit for-Schleife<a class="headerlink" href="#losung-mit-for-schleife" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s1">&#39;http://quotes.toscrape.com/page/&#39;</span>

<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
    <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="n">quotes_divs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">quotes_divs</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span> <span class="c1"># oder .text</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)</span> <span class="c1"># findet Kind-Elemente von dem Element mit der Klasse tags:  tags aus der Top Ten Tags-Liste werden nicht gefunden, weil wir bereits in der quote div sind</span>
        <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
            <span class="n">tags_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>

<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 310 ms, sys: 22 ms, total: 332 ms
Wall time: 2.87 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Text</th>
      <th>Author</th>
      <th>Tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>“The world as we have created it is a process ...</td>
      <td>Albert Einstein</td>
      <td>[change, deep-thoughts, thinking, world]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>“It is our choices, Harry, that show what we t...</td>
      <td>J.K. Rowling</td>
      <td>[abilities, choices]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>“There are only two ways to live your life. On...</td>
      <td>Albert Einstein</td>
      <td>[inspirational, life, live, miracle, miracles]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>“The person, be it gentleman or lady, who has ...</td>
      <td>Jane Austen</td>
      <td>[aliteracy, books, classic, humor]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>“Imperfection is beauty, madness is genius and...</td>
      <td>Marilyn Monroe</td>
      <td>[be-yourself, inspirational]</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>“You never really understand a person until yo...</td>
      <td>Harper Lee</td>
      <td>[better-life-empathy]</td>
    </tr>
    <tr>
      <th>96</th>
      <td>“You have to write the book that wants to be w...</td>
      <td>Madeleine L'Engle</td>
      <td>[books, children, difficult, grown-ups, write,...</td>
    </tr>
    <tr>
      <th>97</th>
      <td>“Never tell the truth to people who are not wo...</td>
      <td>Mark Twain</td>
      <td>[truth]</td>
    </tr>
    <tr>
      <th>98</th>
      <td>“A person's a person, no matter how small.”</td>
      <td>Dr. Seuss</td>
      <td>[inspirational]</td>
    </tr>
    <tr>
      <th>99</th>
      <td>“... a mind needs books as a sword needs a whe...</td>
      <td>George R.R. Martin</td>
      <td>[books, mind]</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 3 columns</p>
</div></div></div>
</div>
</section>
<section id="losung-mit-while-schleife">
<h3>Lösung mit while-Schleife<a class="headerlink" href="#losung-mit-while-schleife" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

<span class="n">page_no</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com/page/&quot;</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page_no</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;No quotes found!&quot;</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
        <span class="k">break</span>

    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="n">quote_divs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">quote_divs</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)</span>
        <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
            <span class="n">tags_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>

    <span class="n">page_no</span> <span class="o">+=</span><span class="mi">1</span>

<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 373 ms, sys: 30.1 ms, total: 403 ms
Wall time: 3.37 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Text</th>
      <th>Author</th>
      <th>Tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>“The world as we have created it is a process ...</td>
      <td>Albert Einstein</td>
      <td>[change, deep-thoughts, thinking, world]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>“It is our choices, Harry, that show what we t...</td>
      <td>J.K. Rowling</td>
      <td>[abilities, choices]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>“There are only two ways to live your life. On...</td>
      <td>Albert Einstein</td>
      <td>[inspirational, life, live, miracle, miracles]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>“The person, be it gentleman or lady, who has ...</td>
      <td>Jane Austen</td>
      <td>[aliteracy, books, classic, humor]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>“Imperfection is beauty, madness is genius and...</td>
      <td>Marilyn Monroe</td>
      <td>[be-yourself, inspirational]</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>“You never really understand a person until yo...</td>
      <td>Harper Lee</td>
      <td>[better-life-empathy]</td>
    </tr>
    <tr>
      <th>96</th>
      <td>“You have to write the book that wants to be w...</td>
      <td>Madeleine L'Engle</td>
      <td>[books, children, difficult, grown-ups, write,...</td>
    </tr>
    <tr>
      <th>97</th>
      <td>“Never tell the truth to people who are not wo...</td>
      <td>Mark Twain</td>
      <td>[truth]</td>
    </tr>
    <tr>
      <th>98</th>
      <td>“A person's a person, no matter how small.”</td>
      <td>Dr. Seuss</td>
      <td>[inspirational]</td>
    </tr>
    <tr>
      <th>99</th>
      <td>“... a mind needs books as a sword needs a whe...</td>
      <td>George R.R. Martin</td>
      <td>[books, mind]</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 3 columns</p>
</div></div></div>
</div>
<p>Alternative Lösung, die wieder den Next-Button zur Formulierung der Abbruchbedingung nutzt:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com&quot;</span>
<span class="n">current_url</span> <span class="o">=</span> <span class="n">base_url</span>
<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">current_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="n">quote_divs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">quote_divs</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)</span>
        <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
            <span class="n">tags_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>

    <span class="n">next_elem</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.next &gt; a&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">next_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">next_path</span> <span class="o">=</span> <span class="n">next_elem</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="c1"># auf den Wert des Attributs &quot;href&quot; zugreifen</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">next_path</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">break</span>

<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 299 ms, sys: 12.8 ms, total: 311 ms
Wall time: 1.98 s
</pre></div>
</div>
</div>
</div>
<p>In allen Lösungen haben wir zwei for-Schleifen ineinander verschachtelt, um die Tags zu allen Zitaten als Liste zu extrahieren. Die Schleife <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">tag</span> <span class="pre">in</span> <span class="pre">tags</span> <span class="pre">...</span></code> kann aber auch durch ein etwas übersichtlicheres und effizienteres Konstrukt ersetzt werden, das sich “List Comprehension” nennt. Was das genau ist, lernen wir nächste Stunde. So sieht die while-Schleife mit list comprehension aus:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com&quot;</span>
<span class="n">current_url</span> <span class="o">=</span> <span class="n">base_url</span>
<span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">current_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="n">quote_divs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">quote_divs</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)</span>
        <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)]</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>

    <span class="n">next_elem</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.next &gt; a&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">next_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">next_path</span> <span class="o">=</span> <span class="n">next_elem</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="c1"># auf den Wert des Attributs &quot;href&quot; zugreifen</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">next_path</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">break</span>

<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 247 ms, sys: 12.4 ms, total: 259 ms
Wall time: 1.95 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="losung-mit-funktionen">
<h3>Lösung mit Funktionen<a class="headerlink" href="#losung-mit-funktionen" title="Link to this heading">#</a></h3>
<p>Zuletzt wäre auch eine Lösung mithilfe von Funktionsdefinitionen denkbar. Entweder, die bestehende Logik wird einfach in eine Funktion umgeschrieben, oder es werden Funktionen so definiert, dass sie die Schleifen komplett ersetzen. Wir betrachten zunächst, wie unsere Lösung mit der for-Schleife in eine Funktion umgeschrieben werden kann:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">scrape_quotes</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">pages_no</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Argumente:</span>
<span class="sd">    `url` (str): Die Basis-URL der Webseite, die die Zitate enthält. Die Seitenzahl wird an diese URL angehängt.</span>
<span class="sd">    `pages_no` (int): Die Anzahl der Seiten, von denen Zitate extrahiert werden sollen.</span>

<span class="sd">    Rückgabewert:</span>
<span class="sd">    `quotes_df` (pandas.DataFrame): Ein DataFrame, das die extrahierten Zitate, Autor:innen und Tags enthält.</span>

<span class="sd">    Die Funktion ruft HTML-Inhalte von allen Unterseiten der angegebenen Website auf und extrahiert  Zitate, Autor:innen und zugehörigen Tags. Die extrahierten Daten werden in ein Wörterbuch</span>
<span class="sd">    gespeichert, das anschließend in ein pandas DataFrame umgewandelt wird.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>
    <span class="n">base_url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;/page/&quot;</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pages_no</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">scrape_url</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scrape_url</span><span class="p">)</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

        <span class="n">quotes_divs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">quotes_divs</span><span class="p">:</span>
            <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span> <span class="c1"># oder .text</span>
            <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
            <span class="n">quote_tags</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)</span> <span class="c1"># findet Kind-Elemente von dem Element mit der Klasse tags:  tags aus der Top Ten Tags-Liste werden nicht gefunden, weil wir bereits in der quote div sind</span>
            <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">quote_tags</span><span class="p">:</span>
                <span class="n">tags_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
            <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>

    <span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">quotes_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="c1"># Funktion aufrufen</span>
<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">scrape_quotes</span><span class="p">(</span><span class="s2">&quot;https://quotes.toscrape.com&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 559 ms, sys: 42.2 ms, total: 601 ms
Wall time: 4.89 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Text</th>
      <th>Author</th>
      <th>Tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>“The world as we have created it is a process ...</td>
      <td>Albert Einstein</td>
      <td>[change, deep-thoughts, thinking, world]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>“It is our choices, Harry, that show what we t...</td>
      <td>J.K. Rowling</td>
      <td>[abilities, choices]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>“There are only two ways to live your life. On...</td>
      <td>Albert Einstein</td>
      <td>[inspirational, life, live, miracle, miracles]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>“The person, be it gentleman or lady, who has ...</td>
      <td>Jane Austen</td>
      <td>[aliteracy, books, classic, humor]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>“Imperfection is beauty, madness is genius and...</td>
      <td>Marilyn Monroe</td>
      <td>[be-yourself, inspirational]</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>“You never really understand a person until yo...</td>
      <td>Harper Lee</td>
      <td>[better-life-empathy]</td>
    </tr>
    <tr>
      <th>96</th>
      <td>“You have to write the book that wants to be w...</td>
      <td>Madeleine L'Engle</td>
      <td>[books, children, difficult, grown-ups, write,...</td>
    </tr>
    <tr>
      <th>97</th>
      <td>“Never tell the truth to people who are not wo...</td>
      <td>Mark Twain</td>
      <td>[truth]</td>
    </tr>
    <tr>
      <th>98</th>
      <td>“A person's a person, no matter how small.”</td>
      <td>Dr. Seuss</td>
      <td>[inspirational]</td>
    </tr>
    <tr>
      <th>99</th>
      <td>“... a mind needs books as a sword needs a whe...</td>
      <td>George R.R. Martin</td>
      <td>[books, mind]</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 3 columns</p>
</div></div></div>
</div>
<p>Diese Funktionsdefinition ist natürlich nicht besonders allgemein und vermutlich würde die Funktion nur einmal mit einer URL als Argument aufgerufen werden. Das widerspricht natürlich dem eigentlichen Sinn einer Funktionsdefinition. Dieses Beispiel soll vor allem demonstrieren, wie der bestehende Code in eine Funktion umgeschrieben werden kann.</p>
<p>Alternativ kann der bestehende Code aber auch mithilfe von Funktionen so umgeschrieben werden, dass die Schleifen gar nicht mehr notwendig sind:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_soup</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Argumente: `url` (String): Die URL der Webseite.</span>
<span class="sd">    Rückgabewert: `soup` (BeautifulSoup-Objekt): Das BeautifulSoup-Objekt, das den analysierten HTML-Inhalt der Webseite repräsentiert.</span>

<span class="sd">    Diese Funktion ruft den HTML-Inhalt der Webseite unter der angegebenen URL mit der requests.get()-Methode ab. Anschließend wird ein BeautifulSoup-Objekt erstellt, indem der HTML-Inhalt mit dem Parser &quot;html.parser&quot; analysiert wird. Das resultierende BeautifulSoup-Objekt wird zurückgegeben.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">soup</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">extract_quotes</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">quotes_dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Argumente:</span>
<span class="sd">    `soup` (BeautifulSoup-Objekt): Das BeautifulSoup-Objekt, das den analysierten HTML-Inhalt einer Webseite repräsentiert.</span>
<span class="sd">    `quotes_dict` (Dictionary): Ein Wörterbuch, das die Zitate enthält.</span>
<span class="sd">    Rückgabewert:</span>
<span class="sd">    `quotes_dict` (Dictionary): Das aktualisierte Wörterbuch, das die extrahierten Zitate enthält.</span>

<span class="sd">    Die Funktion extrahiert Zitate, Autor:innen, Tags und URLs aus einem BeautifulSoup-Objekt. Sie wählt dazu bestimmte HTML-Elemente mit den entsprechenden Klassen aus und fügt die extrahierten Informationen in das quotes_dict-Wörterbuch ein, das anschließend zurückgegeben wird.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">quote_divs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.quote&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">quote_divs</span><span class="p">:</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Author&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
        <span class="n">tags_text</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">div</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.tags &gt; a&quot;</span><span class="p">)]</span>
        <span class="n">quotes_dict</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tags_text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">quotes_dict</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">scrape_all_quotes</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">quotes_dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">original_url</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Argumente:</span>
<span class="sd">    `url` (String): Die URL der Webseite, von der die Zitate gesammelt werden sollen.</span>
<span class="sd">    `quotes_dict` (Dictionary, optional): Ein Wörterbuch, das die Zitate enthält. Wenn nicht angegeben, wird ein neues Wörterbuch erstellt.</span>
<span class="sd">    Rückgabewert:</span>
<span class="sd">    `quotes_df` (DataFrame): Ein Pandas DataFrame, der die gesammelten Zitate enthält.</span>

<span class="sd">    Die Funktion sammelt Zitate von der angegebenen Webseite und allen Unterseiten. Wenn kein quotes_dict-Wörterbuch bereitgestellt wird, wird ein neues Wörterbuch mit leeren Listen erstellt. Das BeautifulSoup-Objekt wird über get_soup() abgerufen und die extract_quotes()-Funktion extrahiert die Zitate und aktualisiert das Wörterbuch. Wenn keine nächste Seite vorhanden ist (bestimmt durch das Fehlen des &quot;.next&quot;-Elements), wird ein Pandas DataFrame (quotes_df) aus dem quotes_dict erstellt und zurückgegeben. Andernfalls wird die URL der nächsten Seite abgerufen und scrape_all_quotes() rekursiv mit der nächsten Seiten-URL und dem aktuellen quotes_dict aufgerufen.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">quotes_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">quotes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Text&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Author&quot;</span><span class="p">:[],</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:[]}</span>

    <span class="k">if</span> <span class="n">original_url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">original_url</span> <span class="o">=</span> <span class="n">url</span>

    <span class="n">soup</span> <span class="o">=</span> <span class="n">get_soup</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">quotes_dict</span> <span class="o">=</span> <span class="n">extract_quotes</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">quotes_dict</span><span class="p">)</span>
    <span class="n">next_elem</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s2">&quot;.next &gt; a&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">next_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">next_path</span> <span class="o">=</span> <span class="n">next_elem</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="c1"># auf den Wert des Attributs &quot;href&quot; zugreifen</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="n">original_url</span> <span class="o">+</span> <span class="n">next_path</span>
        <span class="k">return</span> <span class="n">scrape_all_quotes</span><span class="p">(</span><span class="n">current_url</span><span class="p">,</span> <span class="n">quotes_dict</span><span class="p">,</span> <span class="n">original_url</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">quotes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">quotes_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">quotes_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># %%memit</span>

<span class="c1"># Funktion aufrufen</span>
<span class="n">quotes_df</span> <span class="o">=</span> <span class="n">scrape_all_quotes</span><span class="p">(</span><span class="s2">&quot;https://quotes.toscrape.com&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 532 ms, sys: 24.1 ms, total: 557 ms
Wall time: 3.73 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quotes_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Text</th>
      <th>Author</th>
      <th>Tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>“The world as we have created it is a process ...</td>
      <td>Albert Einstein</td>
      <td>[change, deep-thoughts, thinking, world]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>“It is our choices, Harry, that show what we t...</td>
      <td>J.K. Rowling</td>
      <td>[abilities, choices]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>“There are only two ways to live your life. On...</td>
      <td>Albert Einstein</td>
      <td>[inspirational, life, live, miracle, miracles]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>“The person, be it gentleman or lady, who has ...</td>
      <td>Jane Austen</td>
      <td>[aliteracy, books, classic, humor]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>“Imperfection is beauty, madness is genius and...</td>
      <td>Marilyn Monroe</td>
      <td>[be-yourself, inspirational]</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>“You never really understand a person until yo...</td>
      <td>Harper Lee</td>
      <td>[better-life-empathy]</td>
    </tr>
    <tr>
      <th>96</th>
      <td>“You have to write the book that wants to be w...</td>
      <td>Madeleine L'Engle</td>
      <td>[books, children, difficult, grown-ups, write,...</td>
    </tr>
    <tr>
      <th>97</th>
      <td>“Never tell the truth to people who are not wo...</td>
      <td>Mark Twain</td>
      <td>[truth]</td>
    </tr>
    <tr>
      <th>98</th>
      <td>“A person's a person, no matter how small.”</td>
      <td>Dr. Seuss</td>
      <td>[inspirational]</td>
    </tr>
    <tr>
      <th>99</th>
      <td>“... a mind needs books as a sword needs a whe...</td>
      <td>George R.R. Martin</td>
      <td>[books, mind]</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 3 columns</p>
</div></div></div>
</div>
<p>Bei der Definition von Funktionen beim Web Scraping sind einige Dinge zu beachten:</p>
<p>Die Funktion <code class="docutils literal notranslate"><span class="pre">scrape_all_urls()</span></code> ist so definiert, dass sie die while-Schleife ersetzt. Um das zu erreichen, wurde ein Prinzip angewandt, das sich <strong>Rekursion</strong> nennt. Dabei ruft sich eine Funktion so lange selbst auf, wie eine bestimmte Bedingung erfüllt ist: Als Rückgabewert gibt die Funktion einen erneuten Funktionsaufruf zurück. Wenn die Bedingung nicht mehr erfüllt ist, wird stattdessen der Dataframe <code class="docutils literal notranslate"><span class="pre">quotes_df</span></code> zurückgegeben. Bei jedem erneuten Aufruf der Funktion wird deswegen das <code class="docutils literal notranslate"><span class="pre">quotes_dict</span></code> als zusätzliches Argument übergeben: So kann das Dictionary bei jedem Aufruf der Funktion weiter befüllt werden. Wichtig ist jedoch zu beachten, dass in Python festgelegt ist, wie oft eine Funktion sich selbst aufrufen darf (das heißt dann “maximale Rekursionstiefe”). Wenn die erlaubte Anzahl an Aufrufen überschritten wird, kommt es zu einem schwerwiegenden Fehler, der sich “Stack Overflow” nennt. Bei der Verwendung von Rekursion beim Web Scraping ist also Vorsicht geboten! Zwar sind wir beim Scrapen der Seite <a class="reference external" href="http://quotes.toscrape.com">quotes.toscrape.com</a> noch weit davon entfernt, diese Anzahl zu überschreiten, aber für größere Webscraping-Projekte ist das ein Problem, das berücksichtigt werden muss.</p>
<p>Mehr Informationen zum Thema Rekursion in Python findet ihr <a class="reference external" href="https://realpython.com/python-recursion/">hier</a>.</p>
<p>Ein weiterer Aspekt, der bei der Definition von Funktionen zu beachten ist, ist die Verwendung von Defaultargumenten. <strong>Defaultargumente</strong> sind Werte, die bereits in der Funktionsdefinition für einen Parameter angegeben werden. Diese Werte werden automatisch verwendet, wenn beim Funktionsaufruf kein expliziter Wert für das entsprechende Argument angegeben wird. Im ersten Moment würde es vielleicht intuitiv erscheinen, als Defaultargument für die Funktion <code class="docutils literal notranslate"><span class="pre">scrape_all_urls()</span></code> ein leeres Dictionary <code class="docutils literal notranslate"><span class="pre">quotes_dict</span></code> festzulegen, das bei den nachfolgenden Funktionsaufrufen befüllt wird. Allerdings ist das keine gute Idee: Wenn Defaultargumente einen veränderbaren Datentyp haben, werden sie in Python bei einem wiederholten Funktionsaufruf “mitgenommen” und nicht durch den Default-Wert ersetzt. Das heißt, dass bei jedem erneuten Funktionsaufruf der <code class="docutils literal notranslate"><span class="pre">quotes_df</span></code> DataFrame wächst, weil das <code class="docutils literal notranslate"><span class="pre">quotes_dict</span></code> nicht nur die Elemente des aktuellen Funktionsaufrufs, sondern auch die Elemente aller vorhergegangener Funktionsaufurfe enthält. Statt direkt das Dictionary als Defaultargument festzulegen, sollte deswegen lieber zunächst None als Defaultwert festgelegt werden. Das Dictionary kann dann mithilfe einer bedingten Anweisung im Funktionskörper erstellt werden, nämlich genau dann, wenn das <code class="docutils literal notranslate"><span class="pre">quotes_dict</span></code> beim Funktionsaufruf None ist. Das ist nur beim ersten Funktionsaufruf der Fall.</p>
<p>Mehr Informationen zum Umgang mit Defaultargumenten findet ihr <a class="reference external" href="https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments">hier</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In den hier vorgestellten Scraping-Strategien wird häufig mithilfe einer Konstruktion der Art <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">elem</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None</span></code> oder <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">elem</span> <span class="pre">is</span> <span class="pre">None</span></code> überprüft, ob die BeautifulSoup-Methode <code class="docutils literal notranslate"><span class="pre">.find_all()</span></code> Elemente gefunden hat oder nicht (im letzteren Fall gibt die Funktion nämlich None zurück). Häufig wird diese Konstruktion abgekürzt zu <strong><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">elem</span></code></strong>. <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">elem</span></code> ist aber nicht genau dasselbe wie <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">elem</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None</span></code>: Die erste Bedingung ist False, wenn elem None ist, 0, ein leerer String, eine leere Liste oder ein leeres Dictionary. Die zweite Bedingung ist dagegen nur dann False, wenn elem None ist.</p>
</div>
</section>
</section>
<section id="pandas-dataframe-in-csv-datei-schreiben">
<h2>Pandas-DataFrame in CSV-Datei schreiben<a class="headerlink" href="#pandas-dataframe-in-csv-datei-schreiben" title="Link to this heading">#</a></h2>
<p>Zuletzt wollen wir die extrahierten Daten auf unserem Computer abspeichern. Um einen Pandas DataFrame zu speichern, gibt es verschiedene Methoden. Die Methode .to_csv() erlaubt zum Beispiel, einen DataFrame in einer Tabelle zu speichern, also in einer Datei mit der Dateiendung .csv. Für “speichern” sagt man in diesem Kontext auch “schreiben”: Daten werden in eine Datei geschrieben.</p>
<p>Dokumentation: <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html">https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># quotes_df.to_csv(&quot;quotes_df.csv&quot;, index=False) # default-encoding ist UTF-8</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="time-und-memit-was-ist-das">
<h2>%%time und %%memit: Was ist das?<a class="headerlink" href="#time-und-memit-was-ist-das" title="Link to this heading">#</a></h2>
<p>Wir haben beim Ausführen der Codezellen in diesem Jupyter Notebook jeweils zwei Zeilen am Anfang hinzugefügt:</p>
<ul class="simple">
<li><p>%%time berechnet die Laufzeit einer Jupyter Notebook Codezelle.</p></li>
<li><p>%%memit berechnet, wie viel Speicher für die Ausführung der Codezelle benötigt wird.</p></li>
</ul>
<p>Damit können wir vergleichen, welche Lösung am effizientesten ist. Mehr Informationen findet ihr wie immer in den Dokumentationsseiten:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-time">https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-time</a></p></li>
<li><p><a class="reference external" href="https://ipython-books.github.io/44-profiling-the-memory-usage-of-your-code-with-memory_profiler/">https://ipython-books.github.io/44-profiling-the-memory-usage-of-your-code-with-memory_profiler/</a></p></li>
</ul>
<section id="quellen">
<h3>Quellen<a class="headerlink" href="#quellen" title="Link to this heading">#</a></h3>
<div class="docutils container" id="id1">
<ol class="arabic simple" start="1">
<li id="id117"><p>Python 3.13.0 Documentation. Truth Value Testing. URL: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#truth-value-testing">https://docs.python.org/3/library/stdtypes.html#truth-value-testing</a>.</p></li>
<li id="id115"><p>Luciano Ramalho. <em>Fluent Python. Using None as a Default</em>. O'Reilly Media, 2022. URL: <a class="reference external" href="https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments">https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments</a>.</p></li>
<li id="id114"><p>Kenneth Reitz and Tanya Schlusser. The Hitchhiker's Guide to Python. Mutable Default Arguments. 2024. URL: <a class="reference external" href="https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments">https://docs.python-guide.org/writing/gotchas/#mutable-default-arguments</a>.</p></li>
<li id="id116"><p>John Sturtz. Recursion in Python. An Introduction. URL: <a class="reference external" href="https://realpython.com/python-recursion/">https://realpython.com/python-recursion/</a>.</p></li>
</ol>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters/07/subchapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recap-zitate-von-der-ersten-seite-extrahieren-ohne-metadaten">Recap: Zitate von der ersten Seite extrahieren, ohne Metadaten</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zitate-von-der-ersten-seite-extrahieren-mit-metadaten">Zitate von der ersten Seite extrahieren, mit Metadaten</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zitate-von-allen-seiten-der-website-extrahieren-ohne-metadaten">Zitate von allen Seiten der Website extrahieren, ohne Metadaten</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-for-schleife-fur-exakt-10-unterseiten">Lösung mit for-Schleife: für exakt 10 Unterseiten</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-while-schleife-unbekannte-anzahl-von-unterseiten">Lösung mit while-Schleife: unbekannte Anzahl von Unterseiten</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#zitate-von-allen-seiten-extrahieren-mit-metadaten">Zitate von allen Seiten extrahieren, mit Metadaten</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-for-schleife">Lösung mit for-Schleife</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-while-schleife">Lösung mit while-Schleife</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#losung-mit-funktionen">Lösung mit Funktionen</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pandas-dataframe-in-csv-datei-schreiben">Pandas-DataFrame in CSV-Datei schreiben</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-und-memit-was-ist-das">%%time und %%memit: Was ist das?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quellen">Quellen</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lisa Poggel
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>